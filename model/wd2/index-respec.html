<!DOCTYPE html>
<html>
  <head>
    <title>Web Annotation</title>
    <meta charset='utf-8'></meta>
    <style>

.model {
 empty-cells: show;
 border-collapse: collapse;
 margin-bottom: .5ex;
 border: 1px solid black;
 width: 100%;
}

.model th {
 padding: 3px;
 border: 1px solid #404040;
 text-align: center;
 font-weight: bold;
 font-family: sans-serif;
}

.model td {
 padding: 5px;
 border: 1px solid #404040;
 text-align: left;
 font-family: sans-serif;
}

      </style>
      <script src='http://www.w3.org/Tools/respec/respec-w3c-common' async='true' class='remove'></script>
      <script class='remove'>
      var respecConfig = {
          specStatus: "WD",
          shortName:  "web-annotation",
          editors: [
                {   name:       "Robert Sanderson",
                    url:        "http://www.stanford.edu/~azaroth/",
                    company:    "Stanford University",
                    companyURL: "http://www.stanford.edu/",
                    mailto:     "azaroth@stanford.edu"  },
                {   name:       "Paolo Ciccarese",
                    url:        "http://www.paolociccarese.info",
                    company:    "Massachusetts General Hospital",
                    companyUrl: "",
                    mailto:     "paolo.ciccarese@gmail.com "
                },
                {   name:       "Benjamin Young",
                    url:        "http://bigbluehat.com/",
                    company:    "",
                    companyURL: "",
                    mailto:     "byoung@bigbluehat.com"
                }
          ],
          previousMaturity:     "FPWD",
          previousPublishDate:  "2014-12-11",
          previousURI:          "http://www.w3.org/TR/2014/WD-annotation-model-20141211/",
          publishDate:          "2016-01-11",
          edDraftURI:           "http://w3c.github.io/web-annotation/",
          wg:                   "Web Annotation Working Group",
          wgURI:                "http://www.w3.org/annotation/",
          wgPublicList:         "public-annotation",
          wgPatentURI:          "http://www.w3.org/2004/01/pp-impl/73180/status",
          localBiblio: {
            "iana-media-types": {
                title: "Media Types",
                href: "http://www.iana.org/assignments/media-types/",
                publisher: "IANA (Internet Assigned Numbers Authority)"
            },
            "w3c-language-tags": {
                title: "Language Tags in HTML and XML",
                href: "https://www.w3.org/International/articles/language-tags/",
                publisher: "W3C"
            }
          },
          otherLinks: [
                {
                        key: "Repository",
                        data: [{
                                value: "Github Repository",
                                href: "https://github.com/w3c/web-annotation"
                        }]
                }
          ]
      };
      </script>
    </head>
    <body>


<section id="abstract">

<p>Annotations are typically used to convey information about a resource or associations between resources. Simple examples include a comment or tag on a single web page or image, or a blog post about a news article.</p>

<p>The Web Annotation Data Model specification describes a structured model and format to enable annotations to be shared and reused across different hardware and software platforms. Common use cases can be modeled in a manner that is simple and convenient, while at the same time enabling more complex requirements, including linking arbitrary content to a particular data point or to segments of timed multimedia resources.</p>

<p>The specification provides a specific JSON format for ease of creation and consumption of annotations based on the conceptual model that accommodates these use cases, and the vocabulary of terms that represents it.</p>

</section>

<section id="sotd">
<p>
  <b>This is a work in progress. No section should be considered final, and the absence of any content does not imply that such content is out of scope, or may not appear in the future. If you feel something should be covered, please <a href="mailto:public-annotation@w3.org">tell us!</a></b>
</p>

<p>
This specification was derived from the Open Annotation Community Group's outcomes, and details of the differences between the two are maintained in the <a href="#acknowledgements">Acknowledgement</a> appendix.
</p>

</section>

<section class="informative">
<h2>Introduction</h2>

<p>Annotating, the act of creating associations between distinct pieces
of information, is a pervasive activity online in many guises.
Web citizens make comments about online resources using either tools built
in to the hosting web site, external web services, or the functionality
of an annotation client. Comments about shared photos or videos, reviews of products, or even social network mentions of web resources could all be considered as annotations. In addition, there are a plethora of "sticky note" systems and stand-alone multimedia annotation systems. This specification describes a common approach to expressing these annotations, and more.
</p>

<p>The Web Annotation Data Model provides an extensible, interoperable framework for
expressing annotations such that they can easily be shared between
platforms, with sufficient richness of expression to satisfy complex
requirements while remaining simple enough to also allow for the most common use cases,
such as attaching a piece of text to a single web resource.</p>

<p>An annotation is considered to be a set of connected resources,
typically including a body and target, and conveys that the body is related to the target.
The exact nature of this relationship changes according to the intention of the annotation, but the body is most frequently somehow "about" the target.  This perspective results in a basic model with three parts, depicted below.
The full model supports additional functionality, enabling content to be embedded within the annotation,
selecting arbitrary segments of resources, choosing the appropriate representation of a
resource and providing styling hints to help clients render the annotation appropriately.
Annotations created by or intended for machines are also possible, ensuring that the Data Web is not ignored in favor of only considering the human-oriented Document Web.</p>

<img src="images/intro_model.png" alt="Basic Annotation Model" width="400"/>

<p>The Web Annotation Data Model does not prescribe a transport protocol for creating, managing and retrieving annotations. Instead it describes a resource oriented structure and serialization of that structure that could be carried over many different protocols.  The related [[annotation-protocol]] specification describes a recommended transport layer, which may be adopted separately.</p>


<section>
	<h3>Aims of the Model</h3>

	<p>
The primary aim of the Web Annotation Data Model is to provide a
standard description model and format to enable annotations to be shared between
systems.  This interoperability may be either for sharing with others,
or the migration of private annotations between devices or platforms.  The shared
annotations must be able to be integrated into existing collections
and reused without loss of significant information.  The model should
cover as many annotation use cases as possible, while keeping the simple
annotations easy and expanding from that baseline to make complex uses possible.
</p>

<p>
The Web Annotation Data Model is a single, consistent model that can be used by all interested parties.
All efforts have been made to keep the implementation costs for both producers
and consumers to a minimum.  A single method of fulfilling a use case
is strongly preferred over multiple methods, unless there are existing
standards that need to be accommodated or there is a significant cost
associated with using only a single method.  While the Data Model is built using Linked Data 
fundamentals, the design is intended to allow rich and performant non-graph-based implementations.  
As such, inferencing and other graph-based queries are explicitly not a priority for optimization in the
design of the model.

</p>
</section>

<section>
<h3>Serialization of the Model</h3>

<p>
The examples throughout the document are serialized as [[JSON-LD]] using the Context given in Appendix A of the Annotation Vocabulary [[annotation-vocab]], which is the preferred serialization format.
</p>

<p>When the only information that is recorded in the annotation is the URI of a resource, then that URI is used as the value of the relationship, as in <a href="#annotations">Example 1</a>.  When there is more information about the resource, the URI is the value of the <code>id</code> property of the object which is the value of the relationship, as in <a href="#external-web-resources">Example 2</a>.</p>  


</section>

<section>
<h3>Terminology</h3>
<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [[rfc2119]].
</p>

<dl>
  <dt>Web Resource</dt>
  <dd>An item of interest that is identified by a URI, as described in the Web Architecture [[webarch]].</dd>
  <dt>External Web Resource</dt>
  <dd>A Web Resource which is not part of the representation of the Annotation, such as a web page, image or video.  Conversely a Specific Resource is not an External Web Resource, as its state is captured within the Annotation's representation.</dd>
</dl>

</section>

</section>

<!-- End Introduction -->

<section>
<h2>Web Annotation Principles</h2>

<p>
The Web Annotation Data Model is defined using the following basic principles:

<ul>
<li>An Annotation is a rooted, directed graph that represents a relationship between resources.</li>
<li>There are two primary types of resource that participate in this relationship, Bodies and Targets.</li>
<li>Annotations have 0 or more Bodies.</li>
<li>Annotations have 1 or more Targets.</li>
<li>The content of the Body resources is related to, and typically "about", the content of the Target resources.</li>
<li>Annotations, Bodies and Targets may have their own properties and relationships, typically including creation and descriptive information.</li>
<li>The intent behind the creation of an Annotation or the inclusion of a particular Body or Target is an important property and represented by a Motivation resource.</li>
</ul>
</p>

<p>
The following principles describe additional distinctions regarding the exact nature of Target and Body:

<ul>
<li>The Target or Body resource may be more specific than the entity identified by the resource's URI alone.</li>
<li>In particular,
  <ul>
<li>The Target or Body resource may be a specific segment of the resource.</li>
<li>The Target or Body resource may be styled in a specific way.</li>
<li>The Target or Body resource may be a specific state of the resource.</li>
<li>The Target or Body resource may be included in the Annotation to play a specific role.</li>
<li>The Target or Body resource may be any combination of the above.</li>
</ul></li>
<li>The resource with these constraints is a separate resource from the Annotation, Body or Target, and is called a SpecificResource.</li>
<li>The SpecificResource refers to the source resource and the constraints that make it more specific.</li>
<li>The identity of the SpecificResource is separate from the descriptions of the constraints.</li>
</ul>
</p>

<p>
The following principles describe additional semantics regarding multiple resources:

<ul>
<li>A resource may be a choice between multiple resources.</li>
<li>A resource may be an ordered list of resources.</li>
</ul>
</p>
</section>

<section>
	<h2>Web Annotation Framework</h2>

<section>
<h3>Annotations</h3>

<p>
An Annotation is a web resource. Typically, an Annotation has a single Body, which is a comment or other descriptive resource, and a single Target that the Body is somehow "about".  The Annotation likely also has additional descriptive properties. </p>

<p><b>Example Use Case:</b> Alice has written a post that makes a comment about a particular web page.  Her client creates an Annotation with the post as the body resource, and the web page as the target resource.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>@context</td><td>Property</td><td>The context that determines the meaning of the JSON as an Annotation
  <br/>The Annotation MUST have exactly 1 <code>@context</code> key and the value MUST be <code>http://www.w3.org/ns/anno.jsonld</code></td></tr>
<tr><td>id</td><td>Property</td><td>The identity of the Annotation
<br/>An Annotation SHOULD have exactly 1 URI that identifies it.</td></tr>
<tr><td>type</td><td>Relationship</td><td>The type of the Annotation.
  <br/>An Annotation MUST have 1 or more types, and the <code>Annotation</code> class MUST be one of them.</td></tr>
<tr><td>Annotation</td><td>Class</td><td>The class for Web Annotations
<br/>The <code>Annotation</code> class MUST be associated with an Annotation using <code>type</code>.</td></tr>
<tr><td>body</td><td>Relationship</td><td>The relationship between an Annotation and its Body
<br/>There SHOULD be 1 or more <code>body</code> relationships associated with an Annotation but there MAY be 0.
</td></tr>
<tr><td>target</td><td>Relationship</td><td>The relationship between an Annotation and its Target
<br/>There MUST be 1 or more <code>target</code> relationships associated with an Annotation.
</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Basic Annotation Model">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno1",
  "type": "Annotation",
  "body": "http://example.org/post1",
  "target": "http://example.com/page1"
}
</pre>
</section>

<section>
  <h2>Bodies and Targets</h2>

The Web is distributed, with different systems working together to provide access to content.  Annotations can be used to link those resources together, being referenced as the Body and Target.  The Target resource is always an External Web Resource, but the Body may also be embedded within the Annotation.  External Web Resources may be separately dereferenced to retrieve a representation of their state, whereas the embedded Body does not need to be dereferenced as the representation is included within the Annotation's representation. 

<section>
<h3>External Web Resources</h3>

<p>Web Resources are identified with a URI and have various properties, often including a format or language for the resource's content.  This information may be recorded as part of the Annotation, even if the representation of the resource must be retrieved from the Web.</p>

<p><b>Example Use Case:</b> Beatrice records a long analysis of a patent, and publishes it on her web site as an mp3.  She then creates an Annotation with the PDF as the body, and the patent as the target.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr> 
  <tr><td>id</td><td>Property</td><td>The URI that identifies the Body or Target resource.
<br/>Bodies or Targets which are External Web Resources MUST have exactly 1 <code>id</code> with the value of the resource's URI.
  </td></tr>
  <tr><td>language</td><td>Property</td><td>The language of the Web Resource's content
  <br/>The Body or Target SHOULD have exactly 1 language associated with it, but MAY have 0 or more.  The value of the property SHOULD be a language code following the [[rfc5646]] specifiction.</td></tr>
<tr><td>format</td><td>Property</td><td>The format of the Web Resource's content
  <br/>The Body or Target SHOULD have exactly 1 format associated with it, but MAY have 0 or more.  The value of the property SHOULD be the media-type of the format, following the [[rfc6838]] specification.</td></tr>
</table>

<div class="note">
The [[iana-media-types]] document provides the official registry of media types that can be used with the <code>format</code> property.  The [[w3c-language-tags]] article provides a good overview of the values that implementers can expect to encounter in the <code>language</code> property.
</div>

<h4>Example</h4>

<pre class="example highlight" title="External Web Resources">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno1",
  "type": "Annotation",
  "body": {
    "id": "http://example.org/analysis1.mp3",
    "format": "audio/mpeg",
    "language": "fr"
  },
  "target": {
    "id": "http://example.gov/patent1.pdf",
    "format": "application/pdf",
    "language": "en"
  }
}
</pre>
</section>

<section>
<h3>Classes</h3>

<p>It is useful for clients to know the general type of a Web Resource in advance.  If the client cannot render videos, then knowing that the Body is a video will allow it to avoid needlessly downloading a potentially large content stream.  For resources that do not have obvious media types, such as many data formats, it is also useful for a client to know that a resource with the format <code>text/csv</code> should not simply be rendered as plain text, despite the first part of the media type, whereas <code>application/pdf</code> may be able to be rendered by the user agent despite the main type being 'application'.</p>

<p><b>Example Use Case:</b> Corina shoots a video of her comment about a site on her phone and uploads it. She associates the video with the site via an Annotation, and her client adds types as a hint to consuming systems.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The type of the Body resource.
  <br/>The Body or Target MAY have exactly 1 <code>type</code>, and if so, the value SHOULD be drawn from the list below.</td></tr>
<tr><td>Dataset</td><td>Class</td><td>The class for a resource which encodes data in a defined structure</td></tr>
<tr><td>Image</td><td>Class</td><td>The class for image resources, primarily intended to be seen</td></tr>
<tr><td>Video</td><td>Class</td><td>The class for video resources, with or without audio</td></tr>
<tr><td>Sound</td><td>Class</td><td>The class for a resource primarily intended to be heard</td></tr>
<tr><td>Text</td><td>Class</td><td>The class for a resource primarily intended to be read</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Typing of Body and Target">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno2",
  "type": "Annotation",
  "body": {
    "id": "http://example.org/video1",
    "type": "Video"
  },
  "target": {
    "id": "http://example.org/site1",
    "type": "Text"
  }
}
</pre>
</section>

<section>
<h3>Segments of External Resources</h3>

<p>Many Annotations involve part of an External Web Resource, rather than its entirety. In the Web [[webarch]], segments of resources are identified using URIs with a fragment component that at the same time both describes how to extract the segment of interest from the resource, and identifies the extracted content.  For simple Annotations, it is valuable to be able to use these URIs with a fragment component as the identifier for either Body or Target.
</p>

<p><b>Example Use Case:</b> Dawn wants to describe a particular region of an image.  She highlights that area in her client and types in the description. Her client then constructs a URI with an appropriate fragment component as the target.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
  <tr><td>id</td><td>Property</td><td>The URI that identifies the Body or Target resource.
<br/>Bodies or Targets which are External Web Resources MUST have exactly 1 <code>id</code> with the value of the resource's URI, and that URI MAY have a fragment component.
  </td></tr>
</table>

<p>
  It is important to be aware of the consequences of using a URI with a fragment component, and the restrictions that using them places on implementations.

<ul>
<li>Fragments are defined with respect to individual media types. For example, HTML has a specific set of semantics regarding the meaning of the fragment part of the URI.</li>
<li>Not every media type has a fragment specification.  For example, Office documents might have a media-type and be published on the web, but not have semantics associated with the fragment part of the URI.</li>
<li>Even if a media type does have a fragment definition, it is often not possible to describe the segment of interest sufficiently precisely.  For example, fragments for HTML cannot be used to describe an arbitrary range of text.</li>
<li>It is not possible to determine with certainty what is being identified without knowing the media type, as the same fragment string might be possible in different specifications.  For example, the same fragment string could identify either a rectangular area in an image, or a strangely named section of an HTML document.</li>
<li>URIs with a fragment component are not compatible with other methods of describing the segment more specifically. For example, it is not possible to describe how to retrieve the correct representation, add style information, or associate a role with the resource, using such URIs. The method to accomplish these requirements is described in the <a href="#fragment-selector">Fragment Selector</a> portion of the <a href="#specific-resources">Specific Resources</a> section.</li>
<li>As URIs are considered to be opaque strings, annotation systems may not discover annotations with fragment components when searching by means of the URI without the fragment.  For example, an Annotation with the Target
 <code>http://example.com/image.jpg#xywh=1,1,1,1</code> would not be discovered in a simple search for
 <code>http://example.com/image.jpg</code>, even though it is part of it.</li>
</ul>

For more information regarding the use of URIs with fragment components, please see the Best Practices for Fragment Identifiers and Media Type Definitions [[fragid-best-practices]].
</p>

<h4>Example</h4>

<pre class="example highlight" title="URIs with Fragment Components">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno2",
  "type": "Annotation",
  "body": "http://example.org/description1",
  "target": {
    "id": "http://example.com/image1#xywh=100,100,300,300",
    "type": "Image"
  }
}
</pre>
</section>  

<section>
  <h3>Embedded Textual Body</h3>

<p>In many situations, the body of the Annotation will be in a text format, and created at the same time as the Annotation and not have a separate URI. In these cases, the Body's text can be included as part of the Annotation to avoid having to interact with multiple systems.  The Body may also have the features of External Web Resources, including especially the language of the text and the format that it is conveyed in.</p>

<p><b>Example Use Case:</b> Emily writes a comment about how much she likes an image on a photo sharing website.  Her client creates an Annotation with the comment embedded within it, and adds that it is in French and formatted using HTML.</p>

<h4>Model</h4>

The fundamental features of a textual body are:

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>id</td><td>Property</td><td>The URI that identifies the Textual Body
<br/>The Body MAY have exactly 1 URI that identifies it.</td></tr>
<tr><td>type</td><td>Relationship</td><td>The type of the Textual Body resource.
  <br/>The Body SHOULD have the <code>TextualBody</code> class, and MAY have other classes.</td></tr>
<tr><td>TextualBody</td><td>Class</td><td>A class assigned to the Body for embedding textual resources within the Annotation.
<br/>The Body SHOULD have the <code>TextualBody</code> class.</td></tr>
<tr><td>text</td><td>Property</td><td>The character sequence of the content of the Textual Body.<br/>
There MUST be exactly 1 <code>text</code> property associated with the TextualBody.</td></tr>
</table>

<p>Systems SHOULD assume that Textual Bodies have the <code>Text</code> class, described in <a href="#classes">Classes</a> above, even if it is not explicitly included in the <code>type</code> property. </p>

<p>The properties of External Web Resources, such as <code>language</code> and <code>format</code> also apply to embedded Textual Body resources.</p> 

<h4>Example</h4>

<pre class="example highlight" title="Textual Body">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno3",
  "type":"Annotation",
  "body": {
    "type" : "TextualBody",
    "text" : "&lt;p&gt;Comment text&lt;/p&gt;",
    "format" : "text/html",
    "language" : "fr"
  },
  "target": "http://example.org/photo1"
}
</pre>
</section>

<section>
<h3>String Body</h3>

<p>
The simplest type of Body is a plain text string, without additional information or properties.  This type of body is useful for the simplest of Annotations only, and is NOT RECOMMENDED for uses where the body may need to be referred to from outside of the Annotation.
</p>

<p><b>Example Use Case</b> Franceska wants to create a quick Annotation from a simple, command line client.  She creates the JSON serialization in a text file and sends it to her Annotation server to maintain.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>bodyText</td><td>Property</td><td>The string value of the body of the Annotation.
<br/>There MAY be exactly 1 <code>bodyText</code> for an Annotation, and the value MUST conform to the requirements below.</td></tr>
</table>

<p>
There are several restrictions on when this form may be used and how it is to be interpreted.
<br/>The string body:
<ul>
	<li>MUST be a single <code>xsd:string</code> and the data type MUST NOT be expressed in the serialization.</li>
  <li>MUST NOT have a language associated with it.</li>
  <li>MUST be interpreted as if it were the value of the <code>text</code> property of a Textual Body.</li>
	<li>MUST be interpreted as if the Textual Body resource had a <code>format</code> property with the value <code>text/plain</code>.</li>
  <li>MUST be interpreted as if the Textual Body resource had a <code>purpose</code> property with the value of <code>commenting</code>.</li>
	<li>MUST NOT have the value of other properties of the Textual Body inferred from similar properties on the Annotation resource.</li>
</ul>
</p>

<p>Systems MAY rewrite Annotations to instead use this pattern, rather than maintaining the <code>bodyText</code> form.</p>

<h4>Example</h4>

<pre class="example highlight" title="String Body">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
	"id": "http://example.org/anno3",
	"type":"Annotation",
	"bodyText": "Comment text",
	"target": "http://example.org/target1"
}
</pre>

Which is equivalent to:

<pre class="example highlight" title="Equivalent Textual Body">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno4",
  "type":"Annotation",
  "body": {
    "type": "TextualBody",
    "text": "Comment text",
    "format": "text/plain",
    "purpose": "commenting"
  },
  "target": "http://example.org/target1"
}
</pre>

</section>
</section>  <!-- Bodies and Targets -->

<section>

<h2>Other Properties</h2>

It is often important to have information about the context in which the Annotation and any External Web Resources were created, modified and used.  In particular,

<ul>
  <li>When was the resource created, modified or generated</li>
  <li>Who created, modified or generated the resource, and who is it intended for</li>
  <li>Why was the resource included in the annotation, or the annotation created</li>
  <li>What other identities the resource has</li>
  <li>How can the resource be used, according to its rights and licensing</li>
</ul>


<section>
<h3>Lifecycle Information</h3>

<p>
  The person, organization or machine responsible for the Annotation or referenced resource deserves credit for their contribution, and the time at which those resources are created is useful for display ordering and filtering out old, potentially irrelevant content. The creator of the Annotation is also useful for determining the trustworthiness of the Annotation. The software used to create and serialize the Annotation, along with when that activity occurred, is useful for both advertising and debugging issues.
</p>

<p><b>Example Use Case:</b> Gretchen writes a review of a restaurant online, and wishes to be associated with that review so that her friends know that it was her review and can trust it.  Her client adds her account's identity, and its own identity, to the Annotation and the appropriate timestamps for when the resources were created.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>

<tr><td>creator</td><td>Relationship</td><td>The agent responsible for creating the Annotation, Body or Target.  This may be either a human or software agent.
<br/>There SHOULD be exactly 1 <code>creator</code> relationship per resource, but MAY be 0 or more than 1, as the resource's creator may wish to remain anonymous, or multiple agents may have worked together on it.</td></tr>
<tr><td>created</td><td>Property</td><td>The time at which the Annotation, Body or Target was created.
<br/>There SHOULD be exactly 1 <code>created</code> property per resource, and MUST NOT be more than 1.
The datetime MUST be expressed in the <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">xsd:dateTime</a> format, and SHOULD have a timezone specified.</td></tr>
<tr><td>generator</td><td>Relationship</td><td>The agent responsible for generating the serialization of the Annotation.
<br/>There MAY be 0 or more <code>generator</code> relationships per Annotation</td></tr>
<tr><td>generated</td><td>Property</td><td>The time at which the Annotation serialization was generated.
<br/>There MAY be exactly 1 <code>generated</code> property per Annotation, and MUST NOT be more than 1.
The datetime MUST be expressed in the <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">xsd:dateTime</a> format, and SHOULD have a timezone specified.</td></tr>
<tr><td>modified</td><td>Property</td><td>The time at which the Annotation, Body or Target was modified, after creation.
<br/>There MAY be exactly 1 <code>modified</code> property per resource, and MUST NOT be more than 1.
The datetime MUST be expressed in the <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">xsd:dateTime</a> format, and SHOULD have a timezone specified.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Lifecycle Information">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno4",
  "type": "Annotation",
  "creator": "http://example.org/user1",
  "created": "2015-01-28T12:00:00Z",
  "modified": "2015-01-29T09:00:00Z",
  "generator": "http://example.org/client1",
  "generated": "2015-02-04T12:00:00Z",
  "body": {
    "id": "http://example.net/review1",
    "creator": "http://example.net/user2",
    "created": "2014-06-02T17:00:00Z"
  },
  "target": "http://example.com/restaurant1"
}
</pre>
</section>

<section>
<h3>Agents</h3>

<p>
More information about the agents involved in the creation of an Annotation is normally required beyond a URI that identifies them.  This includes whether they are an individual, a group or a piece of software and properties such as real name, account name, and email address.
</p>

<p><b>Example Use Case:</b> Hannah wants to submit an Annotation to a system that does not manage her identity, and would like a pseudonym to be displayed.  Her client adds this information to the Annotation to send to the service.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>id</td><td>Property</td><td>The URI that identifies the agent
<br/>An Agent SHOULD have exactly 1 URI that identifies it, and MUST NOT have more than 1.</td></tr>
<tr><td>type</td><td>Relationship</td><td>The type of the Agent.
  <br/>An Agent SHOULD have 1 or more classes, from those listed below.</td></tr>
<tr><td>Person</td><td>Class</td><td>The class for a human agent</td></tr>
<tr><td>Organization</td><td>Class</td><td>The class for an organization, as opposed to an individual.</td></tr>
<tr><td>Software</td><td>Class</td><td>The class for a software agent, such as a user's client or a machine learning system that creates Annotations.</td></tr>
<tr><td>name</td><td>Property</td><td>The name of the agent.
<br/>Each agent SHOULD have exactly 1 <code>name</code> property, and MAY have 0 or more.</td></tr>
<tr><td>account</td><td>Property</td><td>The account name of the agent.
<br/>Each agent SHOULD have exactly 1 <code>account</code> property, and MAY have 0.</td></tr>
<tr><td>email</td><td>Relationship</td><td>The email address associated with the agent, using the mailto: URI scheme.
<br/>Each agent MAY have 1 or more <code>email</code> addresses</td></tr>
<tr><td>email_sha1</td><td>Property</td><td>The text representation of the result of applying the sha1 algorithm to the email URI of the agent, including the 'mailto:' prefix and no whitespace.  This allows the mail address to be used as an identifier without publishing the address publicly.<br/>
Each agent MAY have 1 or more values in the <code>email_sha1</code> property.</td></tr>
<tr><td>homepage</td><td>Relationship</td><td>The home page for the agent.<br/>Each agent MAY have 1 or more home pages.</td></tr>

</table>

<h4>Example</h4>

<pre class="example highlight" title="Agents">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno5",
  "type": "Annotation",
  "creator": {
    "id": "http://example.org/user1",
    "type": "Person",
    "name": "My Pseudonym",
    "nick": "pseudo",
    "email_sha1": "58bad08927902ff9307b621c54716dcc5083e339"
  },
  "generator": {
    "id": "http://example.org/client1",
    "type": "SoftwareAgent",
    "name": "Code v2.1",
    "homepage": "http://example.org/client1/homepage1"
  },
  "body": "http://example.net/review1",
  "target": "http://example.com/restaurant1"
}
</pre>
</section>

<section>
<h3>Intended Audience</h3>

<p>Beyond the agents that are associated with the creation and management of the Annotation and other resources, it is also useful to know the audience or class of consuming agent that the resource is intended for.  This allows for roles (such as teacher versus student) or properties of the class (such as a suggested age range). </p>

<p><b>Example Use Case:</b> Irina writes some notes about using a particular textbook to teach a class.  She adds that the intended audience of the Annotation is teachers (who are using the textbook), to distinguish from other Annotations that might have an audience of the students (who are also using the textbook, but to learn from).</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>id</td><td>Property</td><td>The URI that identifies the Audience.
  <br/>There MAY be exactly 1 URI given that identifies the Audience.</td></tr>
<tr><td>type</td><td>Relationship</td><td>The type of the Audience, from the schema.org class structure.<br/>The Audience SHOULD have 1 or more <code>type</code>s and they <code>SHOULD</code> come from the schema.org class structure.</tr>
<tr><td>audience</td><td>Relationship</td><td>The relationship between an Annotation and its intended Audience.
<br/>There MAY be 0 or more Audiences for each Annotation.</td></tr>
</table>

<p>Further properties that describe the audience are used from <a href="http://schema.org/Audience">schema.org's Audience</a> classes.  The properties and class names MUST be prefixed in the JSON with <code>schema:</code> to ensure that they are uniquely distinguished from any other properties or classes.</p>

<p>
The use of <code>audience</code> does not imply nor enable any access restriction to prevent the annotation from being seen.  Systems SHOULD use the information for filtering the display of Annotations based on their knowledge of the user, and not assume that the Annotation or other resources will require authentication and authorization. 
</p>

<h4>Example</h4>

<pre class="example highlight" title="Audience">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno5",
  "type": "Annotation",
  "audience": {
    "id": "http://example.edu/roles/teacher",
    "type": "schema:EducationalAudience",
    "schema:educationalRole": "teacher"
  },
  "body": "http://example.net/classnotes1",
  "target": "http://example.com/textbook1"
}
</pre>
</section>

<section>
<h3>Motivation and Purpose</h3>

<p>In many cases it is important to understand the reasons why the Annotation was created, or why the Textual Body was included in the Annotation, not just the times and agents involved.  These reasons are provided by declaring the motivation for the Annotation's creation or the purpose for the inclusion of the Body in the Annotation; the "why" rather than the "who" and "when" described in the previous sections.</p>

<p><b>Example Use Case:</b>Jane annotates a resource intending to bookmark it for future reference, and provides a description and a tag to make it easier to find again. Her client adds the right motivations to the Annotation and the Body resources to capture this.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>motivation</td><td>Relationship</td><td>The relationship between an Annotation and a Motivation.
<br/>There SHOULD be exactly 1 <code>motivation</code> for each Annotation, and MAY be 0 or more than 1.</td></tr>
<tr><td>purpose</td><td>Relationship</td><td>The relationship between a TextualBody and a Motivation.
<br/>There MAY be 0 or more <code>purpose</code>s for each TextualBody.</td></tr>


<tr><td>Motivation</td><td>Class</td><td>The Motivation for an Annotation is a reason for its creation, and might include things like Replying to another annotation, Commenting on a resource, or Linking to a related resource. </td></tr>
<tr><th colspan="4">Motivations</th></tr>

<tr><td>bookmarking</td><td>Instance </td><td> The motivation for when the user intends to create a bookmark to the Target or part thereof. For example an Annotation that bookmarks the point in a text where the reader finished reading.</td></tr>
<tr><td>classifying</td><td>Instance </td><td> The motivation for when the user intends to that classify the Target as something. For example to classify an image as a portrait.</td></tr>
<tr><td>commenting</td><td>Instance </td><td> The motivation for when the user intends to comment about the Target. For example to provide a commentary about a particular PDF document.</td></tr>
<tr><td>describing</td><td>Instance </td><td> The motivation for when the user intends to describe the Target, as opposed to a comment about them.  For example describing the above PDF's contents, rather than commenting on their accuracy.</td></tr>
<tr><td>editing</td><td>Instance </td><td> The motivation for when the user intends to request a change or edit to the Target resource. For example an Annotation that requests a typo to be corrected. </td></tr>
<tr><td>highlighting</td><td>Instance </td><td> The motivation for when the user intends to highlight the Target resource or segment of it.  For example to draw attention to the selected text that the annotator disagrees with.</td></tr>
<tr><td>identifying</td><td>Instance</td><td>The motivation for when the user intends to  assign an identity to the Target.  For example to associate the URI that identifies a city with a mention of the city in a web page.</td></tr>
<tr><td>linking</td><td>Instance</td><td>The motivation for when the user intends to link to a resource related to the Target.</td></tr>
<tr><td>moderating</td><td>Instance </td><td> The motivation for when the user intends to assign some value or quality to the Target. For example annotating an Annotation to moderate it up in a trust network or threaded discussion.</td></tr>
<tr><td>questioning</td><td>Instance </td><td> The motivation for when the user intends to ask a question about the Target. For example to ask for assistance with a particular section of text, or question its veracity.</td></tr>
<tr><td>replying</td><td>Instance </td> <td> The motivation for when the user intends to reply to a previous statement, either an Annotation or another resource. For example providing the assistance requested in the above.</td></tr>
<tr><td>reviewing</td><td>Instance</td><td> The motivation for when the user intends to review the Target in some assessing fashion, rather than simply make a comment about it. For example to write a review of a Book.</td></tr>
<tr><td>tagging</td><td>Instance </td><td> The motivation for when the user intends to associate a tag with the Target.</td></tr>

</table>

<div class="note">
For more information about how Motivations can be inter-related and new Motivations created, please see the Annotation Vocabulary document [[annotation-vocab]].
</div>

<h4>Example</h4>

<pre class="example highlight" title="Motivation and Purpose">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno6",
  "type": "Annotation",
  "motivation": "bookmarking",
  "body": [
    {
      "text": "readme",
      "purpose": "tagging"
    },
    {
      "text": "A good description of the topic that bears further investigation"
      "purpose": "describing"
    }
  ],
  "target": "http://example.com/page1"
}
</pre>
</section>  

<section>
<h3>Rights Information</h3>

<p>It is common practice to associate a licence or rights statement with a resource, in order to describe the conditions under which it may be used.  This allows the user to make appropriate use of the resource, as well as allowing some automated systems to confirm that the usage is permitted.</p>

<p><b>Example Use Case:</b>Kelly writes a review of a product and wishes to be known as the author of the review, however does not mind how the Annotation that relates the review and the product together is used.  She asserts these two separate rights statements with the Annotation and Body individually.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>rights</td><td>Relationship</td><td>The relationship between an Annotation, Body or Target and a statement about the rights or licence under which the resource may be used.
<br/>There MAY be at exactly 1 <code>rights</code> statement or license linked from each resource.</td></tr>
</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Rights">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno6",
  "type": "Annotation",
  "body": {
    "id": "http://example.net/review1",
    "rights": "http://creativecommons.org/licenses/by/4.0/"
  },
  "target": "http://example.com/product1"
}
</pre>
</section>

<section>
<h3>Other Identities</h3>

<p>In a massively distributed system such as the Web, information is often copied.  In order to track the provenance of the Annotation and other related resources, it is possible to record additional URIs that also identify the resource.  These may be dereferencable "permalinks", identities assigned by a client offline without any knowledge of the web, or simply the location where the current harvesting system discovered the resource.</p>

<p><b>Example Use Case:</b>Lynda creates an Annotation and sends it to multiple systems to maintain, one personal and one public.  She wants to ensure that it the copies can be aligned, and so sets a UUID as the canonical URI, allowing the service to assign an HTTP URI for it.  A subsequent system then harvests the public copy, maintaining the canonical UUID and moves the assigned HTTP URI to <code>via</code>, replacing the <code>id</code> field with its own URI. </p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>canonical</td><td>Relationship</td><td>The relationship between an Annotation, Body or Target and the URI that SHOULD be used to track its identity, regardless of where it is made accessible.  If this property is set, then systems MUST NOT change or delete it.  Systems SHOULD NOT assign a canonical URI without prior agreement if one is not present, as the Annotation could already have a canonical URI elsewhere.
<br/>There MAY be exactly 1 <code>canonical</code> URI for each resource.</td></tr>
<tr><td>via</td><td>Relationship</td><td>The relationship between an Annotation, Body or Target and the URI of where that resource was obtained from by the system that is making it available.
<br/>There MAY be 0 or more URIs provided in <code>via</code> for each resource.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Other Identities">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno7",
  "type": "Annotation",
  "canonical": "urn:uuid:dbfb1861-0ecf-41ad-be94-a584e5c4f1df",
  "via": "http://other.example.org/anno1",
  "body": {
    "id": "http://example.net/review1",
    "rights": "http://creativecommons.org/licenses/by/4.0/"
  },
  "target": "http://example.com/product1"
}
</pre>
</section>


</section>

</section> <!-- /Metadata -->
</section> <!-- /Annotation -->

<section>
<h2>Specific Resources</h2>

<p>
While it is possible using only the constructions described above to create Annotations that reference parts of resources by using URIs with a fragment component, there are many situations when this is not sufficient.  For example, even a simple circular region of an image, or a diagonal line across it, are not possible.  Selecting an arbitrary span of text in an HTML page, perhaps the simplest annotation concept, is also not supported by fragments.  Furthermore, there are non-segment use cases that require a client to retrieve a specific state or representation of the resource, to style it in a particular way, to associate a role with the resource that is specific to the Annotation's use of it, or for the Annotation to only apply when the resource is used in a particular context.
</p>

<p>The Web Annotation Data Model uses a new type of resource to capture these Annotation-specific requirements: a SpecificResource.  The SpecificResource is used in between the Annotation and the Body or Target, as appropriate, to capture additional information about how it is used in the Annotation. The descriptions are typically referenced from the SpecificResource as separate entities and can be of various types to capture the different requirements.  For example, if the Target of the Annotation is a circular region of an image, then the SpecificResource is the circular region, it is described by a Selector, and is also associated with the source Image resource.</p>

<p>Specific Resources and Specifiers MAY be External Web Resources with their own URIs, such as in the example for the <a href="#selectors">Selector</a> construction, however it is RECOMMENDED that they be included in the Annotation's representation to avoid requiring unnecessary network interactions to retrieve all of the information needed to process the Annotation.</p>

<p>
The types of additional specificity that are defined by this document:

<ul>
  <li><a href="#purpose-for-external-web-resources">Purpose:</a> Describe the purpose</a> of including the source resource in the Annotation</li>
  <li><a href="#selectors">Selector:</a> Describe the desired segment of the source resource for the Annotation</li>
  <li><a href="#states">State:</a> Describe the desired representation of the source resource for the Annotation</li>
  <li><a href="#styles">Style:</a> Describe the style in which the source resource should be presented for the Annotation</li>
  <li><a href="#rendering-software">Rendering:</a> Describe the system used by the client for rendering the resource when the annotation was created</li>
  <li><a href="#scope-of-a-resource">Scope:</a> Describe the scope in which the source resource applies for the Annotation</li>
</ul>
</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>id</td><td>Property</td><td>The identity of the Specific Resource
<br/>A Specific Resource MAY have exactly 1 URI that identifies it.</td></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Specific Resource
  <br/>The Specific Resource SHOULD have the <code>SpecificResource</code> class.</td></tr>
<tr><td>SpecificResource</td><td>Class</td><td>The class for Specific Resources
<br/>The <code>SpecificResource</code> class SHOULD be associated with a Specific Resource to be clear as to its role as a more specific region or state of another resource.</td></tr>
<tr><td>source</td><td>Relationship</td><td>The relationship between a Specific Resource and the resource that it is a more specific representation of.
<br/>There MUST be exactly 1 <code>source</code> relationship associated with a Specific Resource.  The source resource MAY be described in detail as in the core data model or be just the resource's URI.
</td></tr>
</table>

<p>The same Specific Resource and Specifier classes are used for both Target and Body. The examples in this section only use one of these, however the same model applies for both.</p>

<section>
  <h3>Purpose for External Web Resources</h3>

<p>As well as Textual Bodies, External Web Resources may also be given a Motivation as to their inclusion within the Annotation.  This is done using the Specific Resource pattern, as the purpose specifies the way in which the resource is used in the context of the Annotation in the same way as a Selector describes the segment or a State describes the representation.</p>

<p><b>Example Use Case:</b> Megan wants to tag a photo with an identifier for a city, rather than just type the city's name which could be ambiguous. Her client uses a well-known URI for the city having done a search for it, and creates a Specific Resource to manage that purpose assignment.</p>


<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>purpose</td><td>Relationship</td><td>The reason for including the Web Resource in the Annotation.
<br/>There MAY be 0 or more Motivations associated with the SpecificResource using <code>purpose</code>.</td></tr>
</table>


<h4>Example</h4>

<pre class="example highlight" title="Resource with Purpose">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno7",
  "type": "Annotation",
  "body": {
    "type": "SpecificResource",
    "purpose": "tagging",
    "source": "http://example.org/city1"
  },
  "target": {
    "id": "http://example.org/photo1",
    "type": "Image"
  }
}
</pre>
</section>

<section>
<h3>Selectors</h3>

<p>Many Annotations refer to part of a resource, rather than all of it, as the Target. We call that part of the resource a Segment (of Interest). A Selector is used to describe how to determine the Segment from within the Source resource.  The nature of the Selector will be dependent on the type of resource, as the methods to describe Segments from various media-types will differ.</p>

<p><b>Example Use Case:</b> Noelle wants to associate a selection of text in a web page, with a slice of a dataset.  She selects both using her client, and creates the Annotation with a SpecificResource that has a Selector for each of the Body and the Target.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>selector</td><td>Relationship</td><td>The relationship between a Specific Resource and a Selector.
<br/>There MUST be exactly 0 or 1 <code>selector</code> relationships associated with a Specific Resource.
</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Selectors">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno8",
  "type": "Annotation",
  "body": {
    "source": "http://example.org/page1",
    "selector": "http://example.org/paraselector1"
  },
  "target": {
    "source": "http://example.com/dataset1",
    "selector": "http://example.org/dataselector1"
  }
}
</pre>

<section>
<h3>Fragment Selector</h3>

<p>As the most well understood mechanism for selecting a Segment is to use the fragment part of a URI defined by the representation's media type, it is useful to allow this as a description mechanism via a Selector.  This allows existing and future fragment specifications to be used with Specific Resources in a consistent way.  To be clear about which fragment type is being used, the Selector may refer to the specification that defines it.</p>

<p><b>Example Use Case:</b> Ophelia wants to associate part of a video as the description of an image.  She selects the time range within the video and clicks that it is describing the target.  Her client then creates the Annotation using a SpecificResource with a FragmentSelector and the <code>describing</code> Motivation. </p>


<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>FragmentSelectors MUST have a <code>type</code> and the value MUST be <code>FragmentSelector</code>.</td></tr>
<tr><td>FragmentSelector</td><td>Class</td><td>A resource which describes the Segment through the use of the fragment component of a URI.</td></tr>
<tr><td>value</td><td>Property</td><td>The contents of the fragment component of a URI that describes the Segment.<br/>
The FragmentSelector MUST have exactly 1 <code>value</code> property.</td></tr>
<tr><td>conformsTo</td><td>Relationship</td><td>The relationship between the FragmentSelector and the specification that defines the syntax of the URI fragment in the <code>value</code> property.
  <br/>The Fragment Selector SHOULD have exactly 1 <code>conformsTo</code> link to the specification that defines the syntax of the fragment and MUST NOT have more than 1.</td></tr>
</table>

<p>It is RECOMMENDED to use <code>FragmentSelector</code> as a consistent method compatible with other means of describing SpecificResources, rather than using the URI with a fragment directly. Consuming applications SHOULD be aware of both.</p>

<p class="informative">
The following URIs are some of the specifications that define the semantics of fragments, and hence may be used with the <code>conformsTo</code> relationship.  Other URIs MAY also be used.
<table class="model">
<tr><th>Name</th><th>Fragment Specification</th><th>Description</th></tr>
<tr><td>HTML</td><td>http://tools.ietf.org/rfc/rfc3236</td><td>[[rfc3236]] Example: <code>namedSection</code> </td></tr>
<tr><td>PDF</td><td>http://tools.ietf.org/rfc/rfc3778</td><td>[[rfc3778]] Example: <code>page=10&amp;viewrect=50,50,640,480</code></td></tr>
<tr><td>Plain Text</td><td>http://tools.ietf.org/rfc/rfc5147</td><td>[[rfc5147]] Example: <code>char=0,10</code></td></tr>
<tr><td>XML</td><td>http://tools.ietf.org/rfc/rfc3023</td><td>[[rfc3023]] Example: <code>xpointer(/a/b/c)</code></td></tr>
<tr><td>RDF/XML</td><td>http://tools.ietf.org/rfc/rfc3870</td><td>[[rfc3870]] Example: <code>namedResource</code></td></tr>
<tr><td>CSV</td><td>http://tools.ietf.org/rfc/rfc7111</td><td>[[rfc7111]] Example: <code>row=5-7</code></td></tr>
<tr><td>Media</td><td>http://www.w3.org/TR/media-frags/</td><td>[[media-frags]] Example: <code>xywh=50,50,640,480</code></td></tr>
<tr><td>SVG</td><td>http://www.w3.org/TR/SVG/</td><td>[[SVG]] Example: <code>svgView(viewBox(50,50,640,480))</code></td></tr>
<tr><td>EPUB3</td><td>http://www.idpf.org/epub/linking/cfi/epub-cfi.html</td><td>[<a href="http://www.idpf.org/epub/linking/cfi/epub-cfi.html">CFI</a>] Example: <code>epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/3:10)</code></td></tr>
</table>
</p>

<p class="note">
The URI that uses the fragment may be reconstructed by concatenating the <code>source</code>, a <code>#</code>, and the <code>value</code>. For example, the URI from the example below would be <code>http://example.org/video1#t=30,60</code>.
</p>

<h4>Example</h4>

<pre class="example highlight" title="Fragment Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno8",
  "type": "Annotation",
  "body": {
    "source": "http://example.org/video1",
    "role": "describing",
    "selector": {
      "type": "FragmentSelector",
      "conformsTo": "http://www.w3.org/TR/media-frags/",
      "value": "t=30,60"
    }
  },
  "target": "http://example.org/image1"  
}
</pre>
</section>


<section>
  <h3>CSS Selector</h3>

<p>One of the most common ways to select elements in the HTML Document Object Model is to use CSS Selectors [[CSS3-selectors]].  CSS Selectors allow for a wide variety of well supported ways to describe the path to an element in a web page, and thus cover many of the basic use cases for Web Annotation.  Results are not defined for when a CSS Selector is applied to a representation that does not conform to the Document Object Model.</p>

<p>Note that CSS is also used for <a href="#styles">styling</a> a resource within an annotation. This class is specifically to re-use the CSS Selector mechanism to select a segment of a resource that conforms to the Document Object Model.</p>

<p><b>Example Use Case:</b> Petra selects a paragraph in a web page that she wishes to write a note about.  Her client calculates a CSS path that cleanly identifies that element and adds it to the annotation.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>CssSelectors MUST have a <code>type</code> and the value MUST be <code>CssSelector</code>.</td></tr>
<tr><td>CssSelector</td><td>Class</td><td>The type of the CSS Selector resource.
  <br/>CSS Selectors MUST have this class associated with them.</td></tr>
<tr><td>value</td><td>Property</td><td>The CSS selection path to the Segment.
<br/>There MUST be exactly 1 <code>value</code> associated with a CSS Selector.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="CSS Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno9",
  "type": "Annotation",
  "body": "http://example.org/note1",
  "target": {
    "source": "http://example.org/page1.html",
    "selector": {
      "type": "CssSelector",
      "value": "#elemid > .elemclass + p"
    }
  }
}
</pre>
</section>

<section>
<h3>Text Quote Selector</h3>

<p>This Selector describes a range of text by copying it, and including some of the text immediately before (a prefix) and after (a suffix) it to distinguish between multiple copies of the same sequence of characters.
</p>
<p>
For example, if the document were again "abcdefghijklmnopqrstuvwxyz", one could select "efg" by a prefix of "abcd", the match of "efg" and a suffix of "hijk".
</p>

<p><b>Example Use Case:</b> Qitara selects a typo ('anotation') in a web page and adds a comment that it should be replaced with the correct spelling ('annotation').</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>Text Quote Selectors MUST have a <code>type</code> and the value MUST be <code>TextQuoteSelector</code>.</td></tr>
<tr><td>TextQuoteSelector</td><td>Class</td><td>The class for a Selector that describes a textual segment by means of quoting it, plus passages before or after it.
<br/>The TextQuoteSelector MUST have this class associated with it.</td></tr>
<tr><td>exact</td><td>Property</td><td>A copy of the text which is being selected, after normalization.
<br/>Each TextQuoteSelector MUST have exactly 1 <code>exact</code> property. </td></tr>
<tr><td>prefix</td><td>Property</td><td>A snippet of text that occurs immediately before the text which is being selected.
<br/>Each TextQuoteSelector SHOULD have exactly 1 <code>prefix</code> property, and MUST NOT have more than 1.</td></tr>
<tr><td>suffix</td><td>Property</td><td>The snippet of text that occurs immediately after the text which is being selected.
<br/>Each TextQuoteSelector SHOULD have exactly 1 <code>suffix</code> property, and MUST NOT have more than 1.</td></tr>
</table>

<p>The text MUST be normalized before recording.  Thus HTML/XML tags should be removed, character entities should be replaced with the character that they encode, unnecessary whitespace should be normalized, character encoding should be turned into UTF-8, and so forth. The normalization routine may be performed automatically by a browser, and other applications should implement the <a href="http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-5DFED1F0">DOM String Comparisons</a> method. This allows the Selector to be used with different encodings and user agents and still have the same semantics and utility.
</p>

<p>When generating the Text Position Selector values, it is recommended that implementations built for an environment that supports DOM Level 3 APIs use the <code>textContent</code> property of top level, user visible Node object [[DOM-Level-3-Core]] of the resource. This content would be located at <code>document.body.textContent</code> in an HTML5 document being accessed via a JavaScript DOM implementation.</p>

<p>If, after processing the prefix, exact and suffix, the user agent discovers multiple matching text sequences, then the selection SHOULD be treated as matching all of the matches.</p>

<p class="note">If the content is under copyright or has other rights asserted on its use, then this method of selecting text is potentially dangerous. A user might select the entire text of the document to annotate, which would not be desirable to copy into the Annotation and share. For static texts with access and/or distribution restrictions, the use of the Text Position Selector is perhaps more appropriate.
</p>

<h4>Example</h4>

<pre class="example highlight" title="Text Quote Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno9",
  "type": "Annotation",
  "body": "http://example.org/comment1",
  "target": {
    "source": "http://example.org/page1",
    "selector": {
      "type": "TextQuoteSelector",
      "exact": "anotation",
      "prefix": "this is an ",
      "suffix": " that has some"
    }
  }
}
</pre>
</section>

<section>
<h3>Text Position Selector</h3>

<p>
This Selector describes a range of text by recording the start and end positions of the selection in the stream.  Position 0 would be immediately before the first character, position 1 would be immediately before the second character, and so on.  The start character is thus included in the list, but the end character is not.</p>
<p>
For example, if the document was "abcdefghijklmnopqrstuvwxyz", the start was 4, and the end was 7, then the selection would be "efg".
</p>

<p><b>Example Use Case:</b> Ramona writes a review of an ebook that does not allow its content to be extracted and copied.  Her client describes the selection using its start and end position in the content.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>Text Position Selectors MUST have a <code>type</code> and the value MUST be <code>TextPositionSelector</code>.</td></tr>
<tr><td>TextPositionSelector</td><td>Class</td><td>The class for a Selector which describes a range of text based on its start and end positions.
<br/>The TextPositionSelector MUST have this class associated with it.</td></tr>
<tr><td>start</td><td>Property</td><td>The starting position of the segment of text. The first character in the full text is character position 0, and the character is included within the segment.
<br/>Each TextPositionSelector MUST have exactly 1 <code>start</code> property, and the value MUST be a non-negative integer.</td></tr>
<tr><td>end</td><td>Property</td><td>The end position of the segment of text. The character is not included within the segment.
<br/>Each TextPositionSelector MUST have exactly 1 <code>end</code> property, and the value MUST be a non-negative integer.</td></tr>

</table>

<p>The text MUST be normalized before counting the characters, in the same way as for Text Quote Selector.</p>

<p class="note">
The use of this Selector does not require text to be copied from the Source document into the Annotation graph, unlike the Text Quote Selector, but is very brittle with regards to changes to the resource. Any edits may change the selection, and thus it is RECOMMENDED that a <a href="#states">State</a> be additionally used to help identify the correct representation.
</p>

<h4>Example</h4>

<pre class="example highlight" title="Text Position Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno10",
  "type": "Annotation",
  "body": "http://example.org/review1",
  "target": {
    "source": "http://example.org/ebook1",
    "selector": {
      "type": "TextPositionSelector",
      "start": 412,
      "end": 795
    }
  }
}
</pre>
</section>

<section>
<h3>Data Position Selector</h3>

<p>
Similar to the Text Position Selector, the Data Position Selector uses the same properties but works at the byte in bitstream level rather than the character in text level.</p>

<p><b>Example Use Case:</b> Sally writes comments about regions of online disk images for forensic purposes and describing emulation requirements.  Her client generates the start and end positions from the binary stream, rather than the more human readable display she is using.</p>


<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>Data Position Selectors MUST have a <code>type</code> and the value MUST be <code>DataPositionSelector</code>.</td></tr>
<tr><td>DataPositionSelector</td><td>Class</td><td>The class for a Selector which describes a range of data based on its start and end positions within the byte stream.
<br/>The DataPositionSelector MUST have this class associated with it.</td></tr>
<tr><td>start</td><td>Property</td><td>The starting position of the segment of data. The first byte is character position 0.
<br/>Each DataPositionSelector MUST have exactly 1 <code>start</code> property.</td></tr>
<tr><td>end</td><td>Property</td><td>The end position of the segment of data. The last character is not included within the segment.
<br/>Each DataPositionSelector MUST have exactly 1 <code>end</code> property.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Data Position Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno10",
  "type": "Annotation",
  "body": "http://example.org/note1",
  "target": {
    "source": "http://example.org/diskimg1",
    "selector": {
      "type": "DataPositionSelector",
      "start": 4096,
      "end": 4104
    }
  }
}
</pre>
</section>

<section>
<h3>SVG Selector</h3>

<p>An SvgSelector defines an area through the use of the Scalable Vector Graphics [[SVG]] standard.  This allows the user to select a non-rectangular area of the content, such as a circle or polygon by describing the region using SVG.  The SVG may be either embedded within the Annotation or referenced as an External Web Resource.</p>

<p>Note that the SvgSelector uses SVG to select an area of a resource. Segments of an SVG representation may also be selected using selectors, including the FragmentSelector or even an SvgSelector.</p>

<p><b>Example Use Case:</b> Teynika is tagging an old map online with a diagonal region for a historical road.  Her client creates SVG polygon to describe the region, relative to the image content.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Selector.<br/>SVG Selectors MUST have a <code>type</code> and the value MUST include <code>SVGSelector</code>. It MUST also include the <code>Content</code> class if the SVG representation is embedded within the Annotation document.</td></tr>
<tr><td>SvgSelector</td><td>Class</td><td>The class for a Selector which defines a shape for the selected area using the SVG standard.
<br/>The Selector MUST have this class associated with it and MAY also have the <code>Content</code> class associated with it.
</td></tr>
<tr><td>Content</td><td>Class</td><td>The class for resources embedded in the Annotation, other than Textual Bodies.
<br/>If the content of the SVG description is embedded, then the Selector MUST have this class associated with it as well as the <code>SvgSelector</code> class.
</td></tr>
<tr><td>text</td><td>Property</td><td>The character sequence of the SVG content.<br/>
There MAY be exactly 1 <code>text</code> property associated with the Selector, and if so the value of the property MUST be well-formed SVG XML.</td></tr>
<tr><td>format</td><td>Property</td><td>The format of the content.
  <br/>The Selector MAY have exactly 1 format associated with it.  If present, the value of the property MUST be the SVG media-type of <code>image/svg+xml</code>.</td></tr>
</table>

<p>The dimensions of the SVG shape or canvas MUST be relative to the dimensions of the Source resource, such that scaling the shape's size to the full size of the image correctly describes the desired area.</p>

<p>It is NOT RECOMMENDED to include style information within the SVG element, nor Javascript, animation, text or other non-shape oriented information. Clients SHOULD ignore such information if present.</p>

<h4>Example</h4>

<pre class="example highlight" title="SVG Selector">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno11",
  "type": "Annotation",
  "body": "http://example.org/road1",
  "target": {
    "source": "http://example.org/map1",
    "selector": {
      "id": "http://example.org/svg1",
      "type": "SvgSelector"
    }
  }
}
</pre>

<pre class="example highlight" title="SVG Selector, embedded">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno11",
  "type": "Annotation",
  "body": "http://example.org/road1",
  "target": {
    "source": "http://example.org/map1",
    "selector": {
      "type": ["SvgSelector", "Content"],
      "text": "&lt;svg:svg&gt; ... &lt;/svg:svg&gt;",
      "format": "image/svg+xml"
    }
  }
}
</pre>
</section>
</section>


<section>
<h3>States</h3>

<p>A State describes the intended state of a resource as applied to the particular Annotation, and thus provides
 the information needed to retrieve the correct representation of that resource. Web resources change over time, and a State might be used to describe how to recover the intended previous version.  Web resources also have multiple formats, and a State might equally be used to describe how to retrieve that particular format.</p>

<p><b>Example Use Case:</b> Ulrika makes a comment about a web page that changes frequently. Her client records information to allow other clients to hopefully reconstruct the original target of the annotation.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>state</td><td>Relationship</td><td>The relationship between the SpecificResource and the State.
<br/>There MAY be 0 or more <code>state</code> relationships for each SpecificResource.</td></tr>
</table>

<p>States MUST be processed before processing Selector or Style information.</p>

<h4>Example</h4>

<pre class="example highlight" title="State">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno12",
  "type": "Annotation",
  "body": "http://example.org/note1",
  "target": {
    "source": "http://example.org/page1",
    "state": {
      "id": "http://example.org/state1"
    }
  }
}
</pre>

<section>
<h3>Time State</h3>

<p>A Time State resource records the time at which the resource is appropriate for the Annotation, typically the time that the Annotation was created and/or a link to a persistent copy of the current version.  The timestamp for the resource could be resolved via the Memento protocol, described in RFC 7089 [[rfc7089]].</p>

<p><b>Example Use Case:</b> Valeria makes a note about the current state of the front page of a news website, and flags that the page is likely to change often.  Her client adds in a State with the current time to describe the version of the page being annotated.</p>


<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the State.<br/>Time States MUST have a <code>type</code> and the value MUST be <code>TimeState</code>.</td></tr>
<tr><td>TimeState</td><td>Class</td><td>A description of how to retrieve a representation
of the Source resource that is temporally appropriate for the Annotation.
<br/>The State MUST have this class associated with it.
</td></tr>
<tr><td>sourceDate</td><td>Property</td><td>The timestamp at which the Source resource should be interpreted for the Annotation.
<br/>There MAY be 0 or more <code>sourceDate</code> properties per TimeState. If there is more than 1, each gives an alternative timestamp at which the Source may be interpreted. The timestamp MUST be expressed in the <code>xsd:dateTime</code> format, and SHOULD have a timezone specified. If <code>sourceDate</code> is provided, then <code>sourceDateStart</code> and <code>sourceDateEnd</code> MUST NOT be provided.</td></tr>
<tr><td>sourceDateStart</td><td>Property</td><td>The timestamp that begins the interval over which the Source resource should be interpreted for the Annotation.
<br/>There MAY be exactly 1 <code>sourceDateStart</code> property per TimeState. The timestamp MUST be expressed in the <code>xsd:dateTime</code> format, and SHOULD have a timezone specified. If <code>sourceDateStart</code> is provided then <code>sourceDateEnd</code> MUST also be provided.</td></tr>
<tr><td>sourceDateEnd</td><td>Property</td><td>The timestamp that ends the interval over which the Source resource should be interpreted for the Annotation.
<br/>There MAY be exactly 1 <code>sourceDateEnd</code> property per TimeState. The timestamp MUST be expressed in the <code>xsd:dateTime</code> format, and SHOULD have a timezone specified. If <code>sourceDateEnd</code> is provided then <code>sourceDateStart</code> MUST also be provided.</td></tr>
<tr><td>cached</td><td>Relationship</td><td>A link to a copy of the Source resource's
representation, appropriate for the Annotation.
<br/>There MAY be 0 or more <code>cached</code> relationships per TimeState. If there is more than 1, each gives an alternative copy of the representation.
</td></tr>
</table>


<h4>Example</h4>

<pre class="example highlight" title="Time State">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno12",
  "type": "Annotation",
  "body": "http://example.org/note1",
  "target": {
    "source": "http://example.org/page1",
    "state": {
      "type": "TimeState",
      "cached": "http://archive.example.org/copy1",
      "sourceDate": "2015-07-20T13:30:00Z"
    }
  }
}
</pre>
</section>

<section>
<h3>Request Header State</h3>

<p>As there are potentially many representations that can be delivered from a resource with a single URI, and a
Specific Resource may only apply to one of them, it is important to be able to record the HTTP Request headers
that need to be sent to retrieve the correct representation.  The HttpRequestState resource maintains a copy
of the headers to be replayed when obtaining the representation. </p>

<p><b>Example Use Case:</b> Wendy retrieves a PDF representation of a web resource that can deliver HTML, PDF or plain text and then writes a description about it.  She signals that her description is only about the PDF representation.  Her client then includes a State to describe how to retrieve the target representation.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the State.<br/>Request Header States MUST have a <code>type</code> and the value MUST be <code>HttpReqeustState</code>.</td></tr>
<tr><td>HttpRequestState</td><td>Class</td><td>A description of how to retrieve an appropriate representation of the Source resource for the Annotation, based on the HTTP Request headers to send on the request.
<br/>The State MUST have this class associated with it.</td></tr>
<tr><td>value</td><td>Property</td><td>The HTTP request headers to send as a single, complete string.
<br/>An HttpRequestState MUST have exactly 1 <code>value</code> property.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="HTTP Request State">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno13",
  "type": "Annotation",
  "body": "http://example.org/description1",
  "target": {
    "source": "http://example.org/resource1",
    "state": {
      "type": "HttpRequestState",
      "value": "Accept: application/pdf"
    }
  }
}
</pre>
</section>
</section>

<section>
<h3>Styles</h3>

<p>The interpretation of a particular Annotation, or the Annotation's body, may rely on the rendering style of the Annotation being consistent across implementations.  For Annotations on binary content such as Images or Video, the background color of the target may not be accessible to the annotation client, and the default coloring may be difficult to perceive, such as a black rectangle rendered as the target area on an image of the night sky. Rendering information is recorded using CSS stylesheets and references to classes defined in those stylesheets.</p>

<p><b>Example Use Case:</b> Xena highlights two paragraphs in a document, and selects in her client that one should be highlighted in red and the other in yellow.  She then makes a comment that the yellow part contradicts the red part. Her client records that she selected the red and yellow coloration of the targets. </p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>Relationship</td><td>The class of the Style.<br/>CSS Stylesheets MAY have a <code>type</code> and if included the value MUST be <code>CssStylesheet</code>.</td></tr>
<tr><td>CssStylesheet</td><td>Class</td><td>A resource which describes styles for resources participating in the Annotation using CSS.
<br/>The class MAY be associated with the stylesheet resource.</td></tr>
<tr><td>Content</td><td>Class</td><td>The class for resources embedded in the Annotation, other than Textual Bodies.
<br/>If the content of the CSS description is embedded, then the State MUST have this class associated with it as well as the <code>CssStylesheet</code> class.
</td></tr>
<tr><td>stylesheet</td><td>Relationship</td><td>The relationship between an <b>Annotation</b> and the Style.
<br/>There MAY be 0 or 1 <code>stylesheet</code> relationships for each Annotation.</td></tr>
<tr><td>styleClass</td><td>Property</td><td>The name of the class used in the CSS description that should be applied to the Specific Resource.<br/>
There MAY be 0 or more <code>styleClass</code> properties on a Specific Resource.</td></tr>
</table>

<p>The CSS Stylesheet is associated with the Annotation itself, and the content provides the rendering hints about the Annotation's constituent resources. It MAY have its own dereferenceable URI that provides the information, or it may be embedded within the Annotation. This is to avoid having single line stylesheets each associated with different resources, and instead to allow reference to a single URI that governs the full set of styles for a particular implementation.</p>

<p>Publishing systems MUST NOT assume that they will be processed; they are only provided as hints rather than requirements.</p>

<p>When rendering a Specific Resource, consuming applications SHOULD check to see if it has a <code>styleClass</code> property.  If it does, then the application SHOULD attempt to locate the appropriate selector in the CSS document, and then apply the css-value block.  If a Specific Resource has a <code>styleClass</code> value, but no such class is described by a <code>stylesheet</code> attached to the Annotation, then the <code>styleClass</code> MUST be ignored.</p>

<h4>Example</h4>

<pre class="example highlight" title="CSS Style">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno13",
  "type": "Annotation",
  "stylesheet": "http://example.org/style1",
  "body": "http://example.org/comment1",
  "target": {
    "source": "http://example.org/document1",
    "styleClass": "red"
  }
}
</pre>

<pre class="example highlight" title="CSS Style, embedded">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno14",
  "type": "Annotation",
  "stylesheet": {
    "type": ["CssStylesheet", "Content"],
    "value": ".red { color: red }",
    "format": "text/css"
  },
  "body": "http://example.org/body1",
  "target": {
    "source": "http://example.org/target1",
    "styleClass": "red"
  }
}
</pre>
</section>

<section>
  <h3>Rendering Software</h3>
  <p>It may be valuable to know the software that was used to process and/or render the target resource when the annotation was created. This information can be used by later systems to potentially recreate the environment to ensure that the annotation can be more easily and more accurately reconnected with the appropriate part of the target's representation. This life cycle information is associated with the Specific Resource, as it is very likely to change between Annotations for the same target, and thus cannot be associated with the target resource directly.</p>

<p><b>Example Use Case:</b> Yadira is using a browser based client to render a PDF of a scholarly article.  Her browser uses a particular library to render the PDF as HTML.  She annotates a paragraph in the view that she sees, the HTML rendering, and her client records that the library that was used for rendering in the annotation, along with her comment and the target PDF.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>renderedVia</td><td>Relationship</td><td>
The relationship between the Specific Resource that represents the target in the annotation, and the piece of software or other system that was used to render the target when the annotation was created.
<br/>There MAY be 0 or more <code>renderedVia</code> relationships for each Specific Resource.
</td></tr>
</table>

<div class="note">Other properties may be associated with the rendering system, including such things as schema:softwareVersion, accessibility functions, labels, references to the actual code, and so forth.  These extensions are beyond the scope of this specification.</div>

<h4>Example</h4>

<pre class="example highlight" title="Scope">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno14",
  "type": "Annotation",
  "body": "http://example.org/comment1",
  "target": {
    "source": "http://example.edu/article.pdf",
    "selector": "http://example.org/selectors/html-selector1",
    "renderedVia": {
      "id": "http://example.com/pdf-to-html-library"
      "type": "Software",
      "schema:softwareVersion": "2.5"
    }
  }
}
</pre>

</section>

<section>
	<h3>Scope of a Resource</h3>
	<p>It is sometimes important for an Annotation to capture the context in which it was made, in terms of the resources that the annotator was viewing or using at the time.  This does not imply an assertion that the annotation is only valid for the image in the context of that page, it just records that the page was being viewed.</p>

<p><b>Example Use Case:</b> Zara makes a comment about an image in a particular web page to say that it is not the right organization's logo.  Her client includes the page that the image is being rendered in, however the annotation is associated with the image resource itself.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>scope</td><td>Relationship</td><td>The relationship between a Specific Resource and the resource that provides the scope or context for it in this Annotation.
  <br/>There MAY be 0 or more <code>scope</code> relationships for each Specific Resource.
</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="Scope">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno15",
  "type": "Annotation",
  "body": "http://example.org/note1",
  "target": {
    "source": "http://example.org/image1",
    "scope": "http://example.org/page1"
  }
}
</pre>
</section>



</section>


<section>
<h2>Multiplicity</h2>

<section>
<h3>Annotations without a Body</h3>

<p>Some Annotations may not have a Body at all.  This is permitted by the model, and applications should expect to encounter such Annotations.</p>

<p><b>Example Use Case:</b> Alexandra highlights a particular region of her ebook in green and, knowing what such a highlight means, she does not give a comment.  Her client associates a Stylesheet with the Annotation, and does not artificially create a body.</p>

<h4>Model</h4>

<p>The <code>body</code> property is omitted when there is no body for the Annotation.</p>

<h4>Example</h4>

<pre class="example highlight" title="Annotations without a Body">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno15",
  "type": "Annotation",
  "target": "http://example.org/ebook1"
}
</pre>
</section>

<section>
<h3>Multiple Bodies or Targets</h3>

<p>
It is also possible for an Annotation to have multiple Bodies and/or Targets.  Each Body is considered to be equally related to each Target individually, rather than to the set of Targets.</p>

<p><b>Example Use Case:</b> Britney associates a tag and a description with two images using a single annotation.</p>

<h4>Model</h4>

<p>The <code>body</code> and/or <code>target</code> relationships of the Annotation may be arrays rather than a single object.</p>

<h4>Example</h4>

<pre class="example highlight" title="Multiple Bodies or Targets">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno16",
  "type": "Annotation",
  "body": [
    {
      "purpose": "describing",
      "source": "http://example.org/description1"
    },
    {
      "purpose": "tagging",
      "text": "tag1"
    }
  ],
  "target": [
    "http://example.org/image1",
    "http://example.org/image2"
  ]
}
</pre>
</section>

<section>
  <h3>Multiplicity Constructs</h3>

	<p>If the relationship between the bodies and targets of an Annotation are more complex than simply each of the bodies being about each of the targets, then additional constructions are required.  These constructions, called Multiplicity Constructs, can express a Choice of alternatives, a Composite set of unordered objects, or an ordered List.  The same constructions can also be used to express those same patterns between descriptions associated with Specific Resources, such as a List of Selectors, or a Choice of States.
	</p>

<p>The option of having a simple string literal for the body is not possible when using Multiplicity constructs, and the embedded textual body resource pattern MUST be used.</p>

<section>
	<h3>Choice</h3>

	<p>A Choice has an ordered list of resources from which an application should select only one to process or display. The order is given from the most preferable to least preferable, according to the Annotation's creator or publisher. </p>

<p><b>Example Use Case:</b> Carla writes up her discussion of a particular site in both French and English.  As the two posts are equivalent, there is no need to display both, and instead she wants French speakers to see the French comment, and everyone else to see the English version.  Her client creates as Choice with the English comment listed first.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>Choice</td><td>Class</td><td>A multiplicity construct that conveys to a consuming application that it should select one of the constituent resources to display to the user, and not render all of them.</td></tr>
<tr><td>members</td><td>Relationship</td><td>A list of resources to choose from, with the default to use listed first.</td></tr>
</table>

<p>Clients MAY use any algorithm to determine which resource to choose, and SHOULD make use of the information present to do so automatically, but MAY present a list and require the user to make the decision.</p>

<h4>Example</h4>

<pre class="example highlight" title="Choice">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno16",
  "type": "Annotation",
  "body": {
    "type": "Choice",
    "members": [
      {
        "id": "http://example.org/note1",
        "language": "en"
      },
      {
        "id": "http://example.org/note2",
        "language": "fr"
      }
    ]
  },
  "target": "http://example.org/site1"
}
</pre>
</section>

<section>
	<h3>List</h3>

	<p>A List is a construct that provides an order to its constituent resources in the context of the Annotation.</p>

	<p><b>Example Use Case:</b> Devina selects a paragraph in a web page, and then highlights a span of text within it to write her comment about.  Her client conveys this by creating a List with two selectors, the first picks the paragraph, and the second the span of text, relative to the paragraph rather than the entire document.</p>

<h4>Model</h4>

<table class="model">
<tr><th>Term</th><th>Type</th><th>Description</th></tr>
<tr><td>List</td><td>Class</td><td>A multiplicity construct that conveys to a consuming application that all of the constituent resources are required for the Annotation to be correctly interpreted, and in a particular order.</td></tr>
<tr><td>members</td><td>Relationship</td><td>A list of resources to use in order.</td></tr>
</table>

<h4>Example</h4>

<pre class="example highlight" title="List">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno17",
  "type": "Annotation",
  "body": "http://example.org/comment1",
  "target": {
    "source": "http://example.org/page1",
    "selector": {
      "type": "List",
      "members": [
        "http://example.org/paraselector1",
        "http://example.org/offsetselector1"
      ]
    }
  }
}
</pre>
</section>
</section>
</section>

<section class="appendix">
  <h3>Complete Example</h3>

<p><b>Entirely Contrived Example Use Case:</b> Erin wants to associate a comment that she wrote in English within the annotation or a external mp3 of the same content in German by someone else, plus a tag, with a range of characters from a particular element in an XML representation of a document as it was at a certain point in time, and for it to be displayed in a particular way.</p>

<pre class="example highlight" title="Complete Example">
{
  "@context": "http://www.w3.org/ns/anno.jsonld",
  "id": "http://example.org/anno17",
  "type": "Annotation",
  "motivation": "commenting",
  "creator": {
    "id": "http://example.org/user1",
    "type": "Person",
    "name": "A. Person",
    "nick": "user1"
  },
  "created": "2015-10-13T13:00:00Z",
  "generator": {
    "id": "http://example.org/client1",
    "type": "SoftwareAgent",
    "name": "Code v2.1",
    "homepage": "http://example.org/homepage1"
  },
  "generated": "2015-10-14T15:13:28Z",
  "stylesheet": {
    "id": "http://example.org/stylesheet1",
    "type": "CssStylesheet"
  },

  "body": [
    {
      "type": "TextualBody",
      "role": "tagging",
      "text": "love"
    },
    {
      "type": "Choice",
      "members": [
        {
          "type": "TextualBody",
          "role": "describing",
          "text": "I really love this particular bit of text in this XML. No really.",
          "format": "text/plain",
          "language": "en",
          "creator": "http://example.org/user1"
        },
        {
          "type": "SpecificResource",
          "role": "describing",
          "source": {
            "id": "http://example.org/comment1",
            "type": "Audio",
            "format": "audio/mpeg",
            "language": "de",
            "creator": {
              "id": "http://example.org/user2",
              "type": "Person"
            }
          }
        }
      ]
    }
  ],
  "target": {
    "type": "SpecificResource",
    "styleClass": "mystyle",
    "source": "http://example.com/document1",
    "state": [
      {
        "type": "HttpRequestState",
        "value": "Accept: application/xml"
      },
      {
        "type": "TimeState",
        "sourceDate": "2015-09-25T12:00:00Z"
      }
    ],
    "selector": {
      "type": "List",
      "members": [
        {
          "type": "FragmentSelector",
          "value": "xpointer(/doc/body/section[2]/para[1])"
        },
        {
          "type": "TextPositionSelector",
          "start": 6,
          "end": 27
        }
      ]
    }
  }
}
</pre>
</section>

<section class="appendix">
  <h3>Index of JSON Keys</h3>

<table border="1px solid black" valign="top" cellspacing="0">
  <tr><th>Key</th><th>Usage</th></tr>
  <tr><td valign="top">id</td><td>Note: Every object MAY have an <code>id</code>.<br/><a href="#annotations">Annotation</a>, <a href="#external-web-resources">Body, Target</a>, <a href="segments-of-external-resources">Segments of External Resources</a>, <a href="#embedded-textual-body">Embedded Textual Body</a>, <a href="#agents">Agent</a>, <a href="#intended-audience">Audience</a>, <a href="#specific-resources">Specific Resource</a></td></tr>
  <tr><td valign="top">type</td><td>Note: Every object MAY have a <code>type</code>.<br/> <a href="#annotations">Annotation</a>, <a href="#classes">Body, Target</a>, <a href="#embedded-textual-body">Embedded Textual Body</a>, <a href="#agents">Agent</a>, <a href="#intended-audience">Audience</a>, <a href="#specific-resources">Specific Resource</a>, <a href="#fragment-selector">Fragment Selector</a>, <a href="#css-selector">CSS Selector</a><a href="#text-quote-selector">Text Quote Selector</a>, <a href="#text-position-selector">Text Position Selector</a>, <a href="#data-position-selector">Data Position Selector</a>, <a href="#svg-selector">SVG Selector</a>, <a href="#time-state">Time State</a>, <a href="#request-header-state">Request Header State</a>, <a href="#styles">CSS Stylesheet</a></td></tr>
  <tr><td>body</td><td><a href="#annotations">Annotation</a></td></tr>
  <tr><td>target</td><td><a href="#annotations">Annotation</a></td></tr>
<tr><td>source</td><td><a href="#specific-resources">Specific Resource</a></td></tr>
<tr><td>selector</td><td><a href="#selectors">Specific Resource</a></td></tr>
<tr><td>state</td><td><a href="#states">Specific Resource</a></td></tr>
<tr><td>scope</td><td><a href="#scope-of-a-resource">Specific Resource</a></td></tr>
<tr><td>renderedVia</td><td><a href="#rendering-software">Specific Resource</a></td></tr>
<tr><td>creator</td><td><a href="#lifecycle-information">Annotation, Body, Target</a></td></tr>
<tr><td>generator</td><td><a href="#lifecycle-information">Annotation</a></td></tr>
<tr><td>rights</td><td><a href="#rights-information">Annotation, Body, Target</a></td></tr>
<tr><td>motivation</td><td><a href="#motivation-and-purpose">Annotation</a></td></tr>
<tr><td>purpose</td><td><a href="#motivation-and-purpose">Textual Body</a>, <a href="#purpose-for-external-web-resources">Specific Resource</a></td></tr>
<tr><td>homepage</td><td><a href="#agents">Agents</a></td></tr>
<tr><td>via</td><td><a href="#other-identities">Annotation, Body, Target</a></td></tr>
<tr><td>canonical</td><td><a href="#other-identities">Annotation, Body, Target</a></td></tr>
<tr><td>stylesheet</td><td><a href="#styles">Annotation</a></td></tr>
<tr><td>cached</td><td><a href="#time-state">Time State</a></td></tr>
<tr><td>conformsTo</td><td><a href="#fragment-selector">Fragment Selector</a></td></tr>
<tr><td>items</td><td> </td></tr>
<tr><td>partOf</td><td> </td></tr>
<tr><td>first</td><td> </td></tr>
<tr><td>last</td><td> </td></tr>
<tr><td>next</td><td> </td></tr>
<tr><td>prev</td><td> </td></tr>
<tr><td>audience</td><td><a href="#intended-audience">Audience</a></td></tr>
<tr><td>bodyText</td><td><a href="#string-body">String Body</a></td></tr>
<tr><td>format</td><td><a href="#external-web-resources">Body, Target</a>, <a href="#svg-selector">SVG Selector</a></td></tr>
<tr><td>language</td><td><a href="#external-web-resources">Body, Target</a></td></tr>
<tr><td>created</td><td><a href="#lifecycle-information">Annotation, Body, Target</a></td></tr>
<tr><td>modified</td><td><a href="#lifecycle-information">Annotation, Body, Target</a></td></tr>
<tr><td>generated</td><td><a href="#lifecycle-information">Annotation</a></td></tr>
<tr><td>text</td><td><a href="#embedded-textual-body">Embedded Textual Body</a>, <a href="#svg-selector">SVG Selector</a></td></tr>
<tr><td>value</td><td><a href="#fragment-selector">Fragment Selector</a>, <a href="#css-selector">CSS Selector</a>, <a href="#request-header-state">Request Header State</a></td></tr>
<tr><td>start</td><td><a href="#text-position-selector">Text Position Selector</a>, <a href="#data-position-selector">Data Position Selector</a></td></tr>
<tr><td>end</td><td><a href="#text-position-selector">Text Position Selector</a>, <a href="#data-position-selector">Data Position Selector</a></td></tr>
<tr><td>exact</td><td><a href="#text-quote-selector">Text Quote Selector</a></td></tr>
<tr><td>prefix</td><td><a href="#text-quote-selector">Text Quote Selector</a></td></tr>
<tr><td>suffix</td><td><a href="#text-quote-selector">Text Quote Selector</a></td></tr>
<tr><td>sourceDate</td><td><a href="#time-state">Time State</a></td></tr>
<tr><td>sourceDateStart</td><td><a href="#time-state">Time State</a></td></tr>
<tr><td>sourceDateEnd</td><td><a href="#time-state">Time State</a></td></tr>
<tr><td>styleClass</td><td><a href="#styles">Specific Resource</a></td></tr>
<tr><td>name</td><td><a href="#agents">Agent</a></td></tr>
<tr><td>email</td><td><a href="#agents">Agent</a></td></tr>
<tr><td>email_sha1</td><td><a href="#agents">Agent</a></td></tr>
<tr><td>account</td><td><a href="#agents">Agent</a></td></tr>
<tr><td>label</td><td> </td></tr>
<tr><td>total</td><td> </td></tr>
</table>
</section>

<section class="appendix">
<h3>Acknowledgements</h3>

<p>The Web Annotation Working Group gratefully acknowledges the contributions of the <a href="http://www.w3.org/community/openannotation/">Open Annotation Community Group</a>.  The <a href="http://www.openannotation.org/spec/core">output</a> of the Community Group was fundamental to the current data model.  In particular the editors would like to thank Herbert Van de Sompel of Los Alamos National Laboratory for his editorial contributions throughout the Community Group process.
</p>

<p>
Changes in this specification from the Community Group's model are:
<ul>
<li>Allow a string literal as the body in bodyText</li>
<li>Replace the ContentAsText construction which was not taken through the standardization process</li>
<li>Allow association of Motivation as roles on a per body or target basis</li>
<li>Align Tags and SemanticTags with roles for body and target</li>
<li>Replace provenance mappings with more common and more correct dcterms functionality</li>
<li>Explicitly recommend dcterms for body and target</li>
<li>Use intuitive and memorable names for the JSON-LD keys</li>
<li>Simplify and regularize the specification</li>
<li>Improve the Choice and List constructions by not multi-classing rdf:List, and instead referencing one</li>
<li>Remove equivalence as a much broader problem than just annotation</li>
<li>Deprecate embedded graphs as an explicit part of the model, instead just include or reference a serialized graph</li>

</ul>
</p>

</section>
</body>
</html>
