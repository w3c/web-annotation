<!DOCTYPE html>
<html>
  <head>
    <title>Embedding Web Annotations in HTML</title>
    <meta charset='utf-8'></meta>
	<style>.turtle .hll { background-color: #ffffcc }

.turtle .c { color: #408080; font-style: italic } /* Comment */
.turtle .err { border: 1px solid #FF0000 } /* Error */
.turtle .k { color: #008000; font-weight: bold } /* Keyword */
.turtle .o { color: #666666 } /* Operator */
.turtle .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.turtle .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.turtle .cp { color: #BC7A00 } /* Comment.Preproc */
.turtle .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.turtle .c1 { color: #408080; font-style: italic } /* Comment.Single */
.turtle .cs { color: #408080; font-style: italic } /* Comment.Special */
.turtle .gd { color: #A00000 } /* Generic.Deleted */
.turtle .ge { font-style: italic } /* Generic.Emph */
.turtle .gr { color: #FF0000 } /* Generic.Error */
.turtle .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.turtle .gi { color: #00A000 } /* Generic.Inserted */
.turtle .go { color: #888888 } /* Generic.Output */
.turtle .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.turtle .gs { font-weight: bold } /* Generic.Strong */
.turtle .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.turtle .gt { color: #0044DD } /* Generic.Traceback */
.turtle .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.turtle .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.turtle .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.turtle .kp { color: #008000 } /* Keyword.Pseudo */
.turtle .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.turtle .kt { color: #B00040 } /* Keyword.Type */
.turtle .m { color: #666666 } /* Literal.Number */
.turtle .s { color: #BA2121 } /* Literal.String */
.turtle .na { color: #7D9029 } /* Name.Attribute */
.turtle .nb { color: #008000 } /* Name.Builtin */
.turtle .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.turtle .no { color: #880000 } /* Name.Constant */
.turtle .nd { color: #AA22FF } /* Name.Decorator */
.turtle .ni { color: #999999; font-weight: bold } /* Name.Entity */
.turtle .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.turtle .nf { color: #0000FF } /* Name.Function */
.turtle .nl { color: #A0A000 } /* Name.Label */
.turtle .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.turtle .nt { color: #008000; font-weight: bold } /* Name.Tag */
.turtle .nv { color: #19177C } /* Name.Variable */
.turtle .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.turtle .w { color: #bbbbbb } /* Text.Whitespace */
.turtle .mb { color: #666666 } /* Literal.Number.Bin */
.turtle .mf { color: #666666 } /* Literal.Number.Float */
.turtle .mh { color: #666666 } /* Literal.Number.Hex */
.turtle .mi { color: #666666 } /* Literal.Number.Integer */
.turtle .mo { color: #666666 } /* Literal.Number.Oct */
.turtle .sa { color: #BA2121 } /* Literal.String.Affix */
.turtle .sb { color: #BA2121 } /* Literal.String.Backtick */
.turtle .sc { color: #BA2121 } /* Literal.String.Char */
.turtle .dl { color: #BA2121 } /* Literal.String.Delimiter */
.turtle .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.turtle .s2 { color: #BA2121 } /* Literal.String.Double */
.turtle .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.turtle .sh { color: #BA2121 } /* Literal.String.Heredoc */
.turtle .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.turtle .sx { color: #008000 } /* Literal.String.Other */
.turtle .sr { color: #BB6688 } /* Literal.String.Regex */
.turtle .s1 { color: #BA2121 } /* Literal.String.Single */
.turtle .ss { color: #19177C } /* Literal.String.Symbol */
.turtle .bp { color: #008000 } /* Name.Builtin.Pseudo */
.turtle .fm { color: #0000FF } /* Name.Function.Magic */
.turtle .vc { color: #19177C } /* Name.Variable.Class */
.turtle .vg { color: #19177C } /* Name.Variable.Global */
.turtle .vi { color: #19177C } /* Name.Variable.Instance */
.turtle .vm { color: #19177C } /* Name.Variable.Magic */
.turtle .il { color: #666666 } /* Literal.Number.Integer.Long */</style><style>
        .model {
            empty-cells: show;
            border-collapse: collapse;
            margin-bottom: .5ex;
            border: 1px solid black;
            width: 100%;
        }

        .model th {
            padding: 3px;
            border: 1px solid #404040;
            text-align: center;
            font-weight: bold;
        }

        .model td {
            padding: 5px;
            border: 1px solid #404040;
            text-align: left;
        }

        .ex_title {
            margin-top: 2rem;
            font-style: italic;
            color: #005A9C;
        }
        span.orcid a  {
            text-decoration: none !important;
            border: none !important;
        }
        span.orcid a img {
            transform: translateY(3px);
        }
      </style>
      <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async='true' class='remove'></script>
      <script class='remove'>
      var respecConfig = {
          specStatus: "WG-NOTE",
          shortName:  "annotation-html",
          errata:     "https://www.w3.org/annotation/errata/",
          editors: [
                {   name:       "Timothy W. Cole",
                    url:        "http://www.library.illinois.edu/people/bios/t-cole3/",
                    company:    "University of Illinois at Urbana-Champaign",
                    companyURL: "http://illinois.edu",
                    mailto:     "t-cole3@illinois.edu",
                    extras:     [{
                      name:  "<img src='orcid_logo.png' alt='orcid logo' />",
                      href:  "https://orcid.org/0000-0002-5906-4581",
                      class: "orcid"
                    }],
                },
                {   name:       "Sarven Capadisli",
                    url:       "http://csarven.ca/#i",
                    company:    "University of Bonn",
                    companyURL: "http://eis.iai.uni-bonn.de/",
                    mailto:     "info@csarven.ca"
                },
                {   name:       "Benjamin Young",
                    url:       "http://bigbluehat.com/",
                    company:    "John Wiley &amp; Sons, Inc.",
                    companyURL: "http://www.wiley.com/",
                    mailto:     "byoung@bigbluehat.com"
                },
				{   name:       "Ivan Herman",
					url:        "https://www.w3.org/People/Ivan/",
					company:    "W3C",
					extras:     [{
					  name:  "<img src='orcid_logo.png' alt='orcid logo'  />",
					  href:  "http://orcid.org/0000-0003-0782-2704",
					  class: "orcid"
					}],
					companyURL: "http://www.w3.org",
					mailto:     "ivan@w3.org"  }
          ],
          edDraftURI:           "http://w3c.github.io/web-annotation/serialization-html-note/",
          wg:                   "Web Annotation Working Group",
          wgURI:                "http://www.w3.org/annotation/",
          wgPublicList:         "public-annotation",
          wgPatentURI:          "https://www.w3.org/2004/01/pp-impl/73180/status",
		  publishDate:          "2017-02-23",
          noRecTrack:           true,
          localBiblio: {
            "iana-media-types": {
                title: "Media Types",
                href: "http://www.iana.org/assignments/media-types/",
                publisher: "IANA (Internet Assigned Numbers Authority)"
            },
            "iconclass": {
              title: "Iconclass",
              href: "http://iconclass.org",
              publisher: "RKD, The Netherlands Institute for Art History"
          },
            "w3c-language-tags": {
                title: "Language Tags in HTML and XML",
                href: "https://www.w3.org/International/articles/language-tags/",
                publisher: "W3C"
            },
            "annotation-vocab": {
              "authors": [
                 "Robert Sanderson",
                 "Paolo Ciccarese",
                 "Benjamin Young"
              ],
              title: "Web Annotation Vocabulary",
              href: "http://www.w3.org/TR/annotation-vocab/",
              publisher: "W3C",
              rawDate: "2017-02-23",
              status: "REC"
            },
            "annotation-model": {
              "authors": [
                    "Robert Sanderson",
                    "Paolo Ciccarese",
                    "Benjamin Young"
              ],
              title: "Web Annotation Data Model",
              href: "http://www.w3.org/TR/annotation-model/",
              publisher: "W3C",
              rawDate: "2017-02-23",
              status: "REC"
            },
            "annotation-protocol": {
              "authors": [
                    "Robert Sanderson"
              ],
              title: "Web Annotation Protocol",
              href: "http://www.w3.org/TR/annotation-protocol/",
              publisher: "W3C",
              rawDate: "2017-02-23",
              status: "REC"
            },
            "cfi": {
                "authors" : [
                    "Peter Sorotokin",
                    "Garth Conboy",
                    "Brady Duga",
                    "John Rivlin",
                    "Don Beaver",
                    "Kevin Ballard",
                    "Alastair Fettes",
                    "Daniel Weck"
                ],
                title: "EPUB Canonical Fragment Identifiers",
                href: "http://www.idpf.org/epub/linking/cfi/epub-cfi-20140628.html",
                publisher: "IDPF",
                rawDate: "2014-06-26",
                status: "Recommended Specification"
            },
            "html-notes": {
              "authors": [
                 "Shane McCarron",
                 "David MacDonald"
              ],
              title: "HTML Notes and Note References",
              href: "http://spec-ops.github.io/html-note/index.html",
              publisher: "Spec-Ops",
              rawDate: "2016-04-26",
              status: "Unofficial Draft"
            },
            "selectors-states": {
              "authors": [
                 "Ivan Herman",
                 "Robert Sanderson",
                 "Paolo Ciccarese",
                 "Benjamin Young"
              ],
              title: "Selectors and States",
              href: "http://www.w3.org/TR/selectors-states/",
              publisher: "W3C",
              rawDate: "2017-02-23",
              status: "W3C Reference Note"
            }
          },
          otherLinks: [
            {
                key: "Repository",
                data: [{
                    value: "Github Repository",
                    href: "https://github.com/w3c/web-annotation"
                }, {
                    value: "File an issue",
                    href: "https://github.com/w3c/web-annotation/issues"
                }]
            }
        ],
		alternateFormats: [
		  {
			uri: "annotation-html.epub",
			label: "ePub"
		  }
	    ],
        noIDLIn: true,
        issueBase: "https://github.com/w3c/web-annotation/issues/"
      };
      </script>
    </head>
    <body>
        <section id="abstract">
            <p>The Web Annotation Working Group has published three Recommendations for expressing annotations on the Web:
                the Web Annotation Data Model [[annotation-model]]; the Web Annotation Vocabulary [[annotation-vocab]]; and the
                Web Annotation Protocol [[annotation-protocol]]. These Recommendations define a serialization of the Model
                in a new, Web annotation-specific profile of JSON-LD [[json-ld]].</p>

            <p>This Note describes and illustrates potential approaches for including annotations
                within HTML documents. Examples also are included illustrating the use within an HTML document
                of annotation Selectors as fragment identifiers. (The Working Group's Selectors and States Reference
                Note [[selectors-states]] defines the syntax used for Selectors as fragment identifiers.)</p>

            <p>The approaches described in this document are incomplete and preliminary. They do not exhaust the full range of feasible options.
                The approaches discussed in this note have emerged from Working Group discussions and should be considered no more
                than initial starting points for further discussion, experimentation and development.</p>
        </section>

        <section id="sotd">
        </section>

        <section>
            <h2>Introduction</h2>

            <p>According to the Web Annotation Data Model [[annotation-model]]:
                <blockquote>
                  <p>"An annotation is considered to be
                  a set of connected resources, typically including a body and target, and conveys that the body
                  is related to the target.... This perspective results in a basic model with three parts,
                  depicted below."</p>
                  <img src="images/intro_model.png" alt="Basic Model: Annotation, Body and Target" width="400"/>
                </blockquote>
            </p>

            <p>The Model goes on to define an extensible, interoperable
                framework for expressing such annotations in RDF-based vocabularies. The Model additionally defines
                a JSON-LD [[json-ld]] serialization of that framework. However, the Model does not prescribe a means for including an
                annotation within a Web page (HTML document)—even when the annotation targets all or part of the page itself or
                all or part of another, external Resource linked from the page.</p>

            <p>For example, the quotation above is simply an HTML blockquote and contains no encoded reference to the quotation
               as it exists within the Web Annotation Data Model Recommendation [[annotation-model]], an HTML document.</p>

            <p>This Note considers how a conformant expression of a Web Annotation or an
                annotation <a href="http://www.w3.org/TR/annotation-model/#selectors">Selector</a>
                that references a segment of an HTML document might usefully be embedded within the same or another HTML document.
                In addition to text embedded within the DOM, HTML documents often reference external resources such as
                images that are meant to be considered integral parts of an HTML Document when viewed on the Web,
                e.g., through the use of the HTML <code>&lt;img&gt;</code> element's <code>src</code> attribute. Approaches discussed in this Note
                would facilitate embedding in HTML an annotation targeting (in the context or scope of a Web page) an image
                or other similar Web page component resource external to an HTML document. </p>

            <section>
                <h3>Scope</h3>
                <p>Pending further experimentation, use-case development, incubation and broader collaborative efforts,
                    this Note stops short of proposing any new, annotation-specific extensions to HTML [[html]].
                    Nor does it propose any new, annotation-specific HTML elements or attributes. To address specific
                    use cases, possible extensions of HTML have been discussed within the Web Annotation Working Group
                    and elsewhere, e.g., an informal proposal for new note, notegroup, and noteref HTML elements to better handle
                    footnote-style references within HTML documents [[html-notes]]. But for now this Note only considers
                    approaches that can work out of the box today, without the need for an extension of HTML or the Web Annotation
                    Vocabulary [[annotation-vocab]]. These approaches rely on existing mechanisms, e.g., RDFa, JSON-LD,
                    fragment identifiers, to embed annotations and elements of annotations within HTML documents. </p>

                <p>This document also neither addresses nor proposes user interface implementations. Some illustrations included have been
                   drawn from demonstration or developmental implementations that include user interface features, but the focus of this
                   Note is the inclusion of annotations in HTML, not interface design.</p>
            </section>

            <section>
                <h3>Motivation</h3>

                <p>The interest in embedding Web Annotations within HTML
                  is motivated by several generic use cases that predate or have arisen over the course
                  of the Web Annotation Working Group's existence, a few of which are listed here:
                    <dl>
                        <dt>Personal Annotating</dt>
                        <dd>Personal annotations added to a locally stored or cached copy of an HTML Web page can
                            obviate the need to create and maintain a separate system to store and manage annotations.
                            Such annotations could be shared on a limited basis (e.g., via email) by sharing the locally modified HTML,
                            prior to or instead of sharing the annotations publicly.</dd>

                        <dt>Offline-first Annotations</dt>
                        <dd>Annotations made while offline and embedded in a local copy of HTML might later be extracted from the
                            locally stored HTML and published to an online, centralized Web Annotation Protocol [[annotation-protocol]]
                            store of annotations when the user is back online.</dd>

                        <dt>Lighweight, decentralized Annotation Tools</dt>
                        <dd>Embedding annotations in HTML may facilitate the creation of lightweight
                            annotation tools that are meant to be deployed in a decentralized fashion
                            (i.e. copies deployed by individuals and used independently of any centralized annotation server
                            or service). </dd>

                        <dt>Collaborative Annotating</dt>
                        <dd>Directly adding annotations to an HTML Web page that is being collaboratively authored, edited, and/or curated
                            by a group of individuals, obviates the need for the group to agree on and select a single, central annotation repository
                            or collaboration environment. But because the annotations as stored in the HTML still use a standard model and vocabulary,
                            individualized tools used by members of the group for viewing and interacting with the annotations can still
                            refer to the standard set of elements and attributes.</dd>

                        <dt>Wholly Internal Annotations</dt>
                        <dd>Requiring the external storage of internal (e.g., footnote) annotations, i.e., annotations linking text (an annotation target)
                            appearing at one point in an HTML document to text (an annotation body) appearing elsewhere in the same HTML document is
                            inefficient in most instances and can make interactive displays of these annotations unduly complicated.</dd>
                    </dl>
                </p>
            </section>
        </section>

        <section>
            <h3 id="embed-json-ld">Annotations Embedded as JSON-LD</h3>
            <p>JSON-LD [[json-ld]] is the serialization format used in the Web Annotation Data Model [[annotation-model]].
              HTML can accommodate this serialization format directly via the use of the HTML <code>&lt;script&gt;</code> element with its
              <code>type</code> attribute assigned the media type for a Web Annotation:
                <code>application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"</code>.
              </p>

            <p>The following three annotations are all embedded in a single HTML document.  This document describes a digital image created by
                scanning a page from a Renaissance-era book; the object scanned was known as an emblem. A JPEG image of the emblem is linked
                from the HTML document using an <code>&lt;img&gt;</code> element. A transcription of the German language text of the emblem's
                motto (i.e., the emblem's caption) is included in the HTML document.
            </p>

          <section>
              <h3>Annotating an HTML <code>&lt;div&gt;</code></h3>
              <p><span style="font-weight:bold">Use case for Example 1:</span> Mara wants to annotate the transcription of the emblem motto
                  with its Latin translation. The target of the annotation is the
                  <code>&lt;div&gt;</code> node of the HTML document that has an <code>id</code> attribute
                  with the value <code>"mottoTranscription"</code>.
                  Because the target of the annotation is
                  a node which has an <code>id</code> attribute, a CSS Selector is appropriate.
                  The body of the annotation is the plain text of the Latin translation. To embed the body in the annotation, a <code>TextualBody</code> is used.
                  To identify the annotation itself, an IRI [[rfc3987]] is provided as the value of the annotation's <code>id</code> property.
                  It is not required that this IRI be dereferenceable.
              </p>

            <h4>JSON-LD Example 1</h4>
            <pre class="example highlight" title="Annotating a transcribed motto">
            &lt;script type='application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"'&gt;
            {
                "@context": "http://www.w3.org/ns/anno.jsonld",
                "id": "http://example.org/annotations/anno-01",
                "type": "Annotation",
                "motivation": "describing",

                "target": {
                    "source": "http://example.org/Emblem004.html",
                    "selector": {
                        "type": "CssSelector",
                        "value": "div#mottoTranscription"
                    }
                },

                "body": {
                    "type": "TextualBody",
                    "value": "Fiunt, quae posse negabas.",
                    "format": "text/plain",
                    "language": "la"
                },

                "created": "2017-01-26T17:30:04.639Z",
                "creator": {
                    "type": "Person",
                    "email": "mailto:mara@example.org",
                    "name": "Mara"
                }
            }
            &lt;/script&gt;
            </pre>

              <p class="note"> While an HTML <code>&lt;script&gt;</code> node may itself have an <code>id</code>
                  attribute, implementers are discouraged from using an HTML URL with fragment identifier to identify an annotation.
                  An HTML fragment identifier is only intended to indicate and help navigate to a specific DOM node in an HTML document
                  (see HTML5 Recommendation [[html5]] Section 5.6.9, "Navigating to a fragment identifier").
                  A fragment identifier does not unambiguously identify the contents of this node as a separate resource.
              </p>
          </section>

          <section>
                <h3>Annotating a Web page image</h3>
              <p><span style="font-weight:bold">Use case for Example 2</span>: Tim wants to tag the emblem image linked from the
                  HTML document with an Iconclass descriptor. (Iconclass [[iconclass]] is a linked open data friendly, multilingual classification
                  system for cultural content.) The body of this annotation is therefore an External Web Resource.  To make clear that the image is
                  being annotated within the context of the Web page describing the emblem, a <code>SpecificResource</code> with a <code>scope</code> property is used
                  to express the target of the annotation.
              </p>

            <h4>JSON-LD Example 2</h4>
            <pre class="example highlight" title="Annotating the embedded image">
            &lt;script type='application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"'&gt;
            {
                "@context": "http://www.w3.org/ns/anno.jsonld",
                "id": "http://example.org/annotations/anno-02",
                "type": "Annotation",
                "motivation": "tagging",

                "target": {
                    "source": "http://example.org/images/E4.jpg",
                    "scope": "http://example.org/Emblem004.html"
                },

                "body": "http://iconclass.org/rkd/25F24",

                "created": "2017-01-26T18:16:42.26Z",
                "creator": {
                    "type": "Person",
                    "email": "mailto:tim@example.org",
                    "name": "Tim"
                }
            }
            &lt;/script&gt;
            </pre>
          </section>

          <section>
              <h3>Annotating the <code>&lt;body&gt;</code> of an HTML document</h3>
              <p><span style="font-weight:bold">Use case for Example 3</span>: Myung-Ja wants to link
                  the description of this emblem with another digitized emblem at the University of Illinois.
                  The other emblem, an external Web resource, is the body of the annotation.
                  The motivation of the annotation is "linking".
                  The entire <code>&lt;body&gt;</code> node of the HTML document serves as the target of this annotation.
                  As with Example 1, a CSS Selector is used to express the target.
              </p>
            <h4>JSON-LD Example 3</h4>
            <pre class="example highlight" title="Annotating the body of a Web page">
            &lt;script type='application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"'&gt;
            {
                "@context": "http://www.w3.org/ns/anno.jsonld",
                "id": "http://example.org/annotations/anno-03",
                "type": "Annotation",
                "motivation": "linking",

                "target": {
                    "source": "http://example.org/Emblem004.html",
                    "selector": {
                        "type": "CssSelector",
                        "value": "body"
                    }
                },

                "body": "http://hdl.handle.net/10111/EmblemRegistry:E012658",

                "created": "2017-01-26T18:41:43.218Z",
                "creator": {
                    "type": "Person",
                    "email": "mailto:mj@example.org",
                    "name": "Myung-Ja"
                }
            }
            &lt;/script&gt;
            </pre>
              <p class="note">While HTML <code>&lt;script&gt;</code> elements
                  are allowed in both the <code>&lt;head&gt;</code> and the <code>&lt;body&gt;</code> elements, it is suggested to
                  add embedded annotations to the <code>&lt;head&gt;</code> element when targeting the whole
                  of the <code>&lt;body&gt;</code> element of an HTML document; this avoids any potential ambiguity
                  that might arise from an annotation targeting itself.
              </p>
          </section>
        </section>

        <section>
            <h3>Annotations Embedded as RDFa</h3>
            <!-- <p>TODO: Describe how dokieli embeds Web Annotations in HTML using RDFa. Include examples of annotations in RDFa.
                     Otherwise keep relatively succint and focused on the annotation in RDFa, with less about the complete application
                     Instead point to the application...</p>
            <p>TODO: Summarize comparitive advantages of this approach, e.g., markup of the target with attributes, etc. ...</p> -->

			<p>Another approach of embedding annotations into HTML is to use RDFa [[rdfa-primer]]. The advantage of using RDFa is that the annotation terms are mixed with the core HTML content, meaning that, for example, the text in the HTML source can be also re-used as an annotation textual body. In other words, a single resource may become both human visible as well as machine-readable. On the other hand, RDFa is an RDF serialization syntax: the RDF vocabulary described in [[annotation-vocab]] must thefore be used instead of the JSON-LD encoding used in the [[annotation-model]] document. This requirement may be problematic for some users.</p>

            <h4>Example</h4>

			<p>This example is a significantly simplified version of a more complex application that uses an RDFa encoding of annotations within a framework for decentralised article authoring and annotation (see <a href="https://dokie.li/"> for further details</a>). The example shows one of the advantages of RDFa: the “Communities have various…” text, while readable when the corresponding HTML page is displayed, automatically provides the textual body of the annotation. The relative complexity of mixing complex RDFa structures with HTML makes it more suitable for automatic code generation (e.g., through authoring systems) rather than manual editing.</p>

      		<p class="note">The example below relies on the fact that RDFa parsers use the <a href="https://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa Core Initial Context</a> to understand the predefined prefixes.</p>

            <pre id="dokieli-example" class="example" title="Simplified dokieli example">&lt;article resource="" typeof="oa:Annotation"&gt;
  &lt;h1 property="schema:name"&gt;Sarven Capadisli &lt;span property="oa:motivatedBy"
      resource="oa:comments"&gt;comments&lt;/span&gt;&lt;/h1&gt;
  &lt;dl&gt;
    &lt;dt&gt;Canonical&lt;/dt&gt;
    &lt;dd property="oa:canonical"
        resource="urn:uuid:5fdc8f8d-5930..."&gt;5fdc8f8d-5930...&lt;/dd&gt;

    &lt;dt&gt;&lt;a href="#abstract" property="oa:hasTarget"&gt;In response to&lt;/a&gt;
       (&lt;a about="#abstract" href="http://example.org/ldn"
           property="oa:hasSource" typeof="oa:SpecificResource"&gt;part of&lt;/a&gt;)&lt;/dt&gt;
    &lt;dd&gt;
      &lt;blockquote about="#abstract" cite="http://example.org/ldn#abstract"&gt;
        &lt;span property="oa:hasSelector" typeof="oa:FragmentSelector"&gt;
          &lt;span property="oa:refinedBy" typeof="oa:TextQuoteSelector"&gt;
            &lt;span property="oa:prefix"&gt;N provides a building block for &lt;/span&gt;
            &lt;span property="oa:exact"&gt;decentralised&lt;/span&gt;
            &lt;span property="oa:suffix"&gt; Web applications. This permits e&lt;/span&gt;
         &lt;/span&gt;
       &lt;/span&gt;
     &lt;/blockquote&gt;
    &lt;/dd&gt;

    &lt;dt&gt;Rendered via&lt;/dt&gt;
    &lt;dd&gt;&lt;a about="#abstract" href="https://dokie.li/"
           property="oa:renderedVia"&gt;dokieli&lt;/a&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;section rel="oa:hasBody"&gt;
    &lt;div datatype="rdf:HTML" property="rdf:value" typeof="oa:TextualBody"&gt;
      Communities have various semantics for the term &lt;em&gt;decentralisation&lt;/em&gt;.&lt;/div&gt;
  &lt;/section&gt;
&lt;/article&gt;</pre>

		  <p>Interpreting this HTML content yields, in [[turtle]]:</p>

<pre id="dokieli-example-turtle" class="example nohighlight turtle" title="dokieli example in Turtle">
<span></span><span class="k">@prefix</span><span class="w"> </span><span class="nn">oa:</span><span class="w"> </span><span class="nv">&lt;http://www.w3.org/ns/oa#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">schema:</span><span class="w"> </span><span class="nv">&lt;http://schema.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="k">@prefix</span><span class="w"> </span><span class="nn">rdf:</span><span class="w"> </span><span class="nv">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w"></span>

<span class="nv">&lt;https://example.org/art&gt;</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">Annotation</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">schema:</span><span class="nt">name</span><span class="w"> </span><span class="s">&quot;Sarven Capadisli comments&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">canonical</span><span class="w"> </span><span class="nv">&lt;urn:uuid:5fdc8f8d-5930...&gt;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">hasBody</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="kt">a</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">TextualBody</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nn">rdf:</span><span class="nt">value</span><span class="w"> </span><span class="s">&quot;Communities have various semantics for the term &lt;em&gt;decentralisation&lt;/em&gt;.&quot;</span><span class="o">^^</span><span class="ge">rdf:HTML</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">hasTarget</span><span class="w"> </span><span class="nv">&lt;http://example.org/art#abstract&gt;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">motivatedBy</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">comments</span><span class="w"> </span><span class="p">.</span><span class="w"></span>

<span class="nv">&lt;http://example.org/art#abstract&gt;</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">SpecificResource</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">hasSelector</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="kt">a</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">FragmentSelector</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nn">oa:</span><span class="nt">refinedBy</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="kt">a</span><span class="w"> </span><span class="nn">oa:</span><span class="nt">TextQuoteSelector</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nn">oa:</span><span class="nt">exact</span><span class="w"> </span><span class="s">&quot;decentralised&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nn">oa:</span><span class="nt">prefix</span><span class="w"> </span><span class="s">&quot;N provides a building block for &quot;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="nn">oa:</span><span class="nt">suffix</span><span class="w"> </span><span class="s">&quot; Web applications. This permits e&quot;</span><span class="w"></span>
<span class="w">	</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">hasSource</span><span class="w"> </span><span class="nv">&lt;http://example.org/ldn&gt;</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="nn">oa:</span><span class="nt">renderedVia</span><span class="w"> </span><span class="nv">&lt;https://dokie.li/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
</pre>

		<section>
			<h4>Mixing RDFa with embedded RDF content</h4>

			<p>The approach used in <a href="#embed-json-ld"></a> can be combined, within the same HTML content, with the usage of RDFa. It is also possible to use the same approach (namely using a <code>&lt;script&gt;</code> element with an appropriate media type) to include RDF using other serializations, for exaple Turtle (see <a href="https://www.w3.org/TR/turtle/#in-html">Appendix A</a> of the [[turtle]] specification for more details). I.e, it is possible to modify the <a href="#dokieli-example">dokieli example</a> above as follows:</p>

<pre id="dokieli-example-modified" class="example" title="Simplified dokieli example with embedded turtle">&lt;script type="text/turtle"&gt;
  @prefix oa: &lt;http://www.w3.org/ns/oa#&gt; .

  &lt;http://example.org/art#abstract&gt; a oa:SpecificResource ;
    oa:hasSelector [
      a oa:FragmentSelector ;
      oa:refinedBy [
        a oa:TextQuoteSelector ;
        oa:exact "decentralised" ;
        oa:prefix "N provides a building block for " ;
        oa:suffix " Web applications. This permits e"
      ]
    ] ;
&lt;/script&gt;

&lt;article resource="" typeof="oa:Annotation"&gt;
  &lt;h1 property="schema:name"&gt;Sarven Capadisli &lt;span property="oa:motivatedBy"
      resource="oa:comments"&gt;comments&lt;/span&gt;&lt;/h1&gt;
  &lt;dl&gt;
    &lt;dt&gt;Canonical&lt;/dt&gt;
    &lt;dd property="oa:canonical"
        resource="urn:uuid:5fdc8f8d-5930..."&gt;5fdc8f8d-5930...&lt;/dd&gt;

    &lt;dt&gt;&lt;a href="#abstract" property="oa:hasTarget"&gt;In response to&lt;/a&gt;
       (&lt;a about="#abstract" href="http://example.org/ldn"
           property="oa:hasSource" typeof="oa:SpecificResource"&gt;part of&lt;/a&gt;)&lt;/dt&gt;

    &lt;dt&gt;Rendered via&lt;/dt&gt;
    &lt;dd&gt;&lt;a about="#abstract" href="https://dokie.li/"
         property="oa:renderedVia"&gt;dokieli&lt;/a&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;section rel="oa:hasBody"&gt;
    &lt;div datatype="rdf:HTML" property="rdf:value" typeof="oa:TextualBody"&gt;
      Communities have various semantics for the term &lt;em&gt;decentralisation&lt;/em&gt;.&lt;/div&gt;
  &lt;/section&gt;
&lt;/article&gt;</pre>

				<p>With an appropriate tools that understand both RDFa and the embedded Turtle the results is identical to <a href="#dokieli-example-turtle">Example 5</a>.</p>

				<p>Care should be taken, however, that the exact details of what it means to mix both RDFa and embedded RDF contents within the same HTML file is not (yet) formally specified. Tools that do understand this type of mix usually parse the various syntaxes into separate RDF Graphs (see [[rdf11-concepts]]) which are then merged following the rules described in the RDF Semantics document&nbsp;[[rdf11-mt]]. This means that, for example, blank nodes are not shared, nor are namespace declarations among the different serializations.</p>
			</section>
        </section>

        <section>
          <h3>Web Annotation-based Citation URLs</h3>
          <p>The Selectors and States Note [[selectors-states]] published by the Web Annotation Working Group includes information on encoding
              <a data-cite="selectors-states#frags">Web Annotation Selectors and State classes as IRI Fragment Identifiers</a>. The following
              examples show how these URLs could be used to reference portions of a Specific Resource on the Web via IRIs:
          </p>
	  <section>
          <h3>Example using <code>&lt;blockquote&gt;</code> and <code>&lt;q&gt;</code> tags</h3>

          <pre class="example highlight" title="Example blockquote and q tags using the cite attribute">
            &lt;blockquote cite="https://www.w3.org/TR/annotation-model/#introduction"&gt;
              &lt;q cite="https://www.w3.org/TR/annotation-model/#selector(type=TextPositionSelector,start=8424,end=8270)"&gt;
              An annotation is considered to be a set of connected resources, typically including
               a body and target, and conveys that the body is related to the target.&lt;/q&gt;

              &lt;q cite="https://www.w3.org/TR/annotation-model/#selector(type=TextPositionSelector,start=8651,end=8576)"&gt;
              This perspective results in a basic model with three parts, depicted below.&lt;/q&gt;

              &lt;q cite="https://www.w3.org/TR/annotation-model/#selector(type=XPathSelector,value=//*[@id%3D%22introduction%22]/img)"&gt;
                &lt;img src="images/intro_model.png" alt="Basic Model: Annotation, Body and Target" width="400"/&gt;
              &lt;/q&gt;
            &lt;/blockquote&gt;
          </pre>

          <p>In this example, the <code>&lt;blockquote&gt;</code>'s <code>cite</code> attribute is set to a typical HTML fragment identifier.
          The <code>&lt;q&gt;</code> tags use <code>cite</code> attribute values set to Web Annotation Selector Fragment Identifiers&mdash;which
          are convertable into Web Annotation Data Model [[annotation-model]] Selector statements. The <code>&lt;img&gt;</code> tag is also
          wrapped in a <code>&lt;q&gt;</code> as it's location is not directly contained in either of the previously quoted section. However,
          all of the quotations (within the <code>&lt;q&gt;</code> tags) exist within the <code>#introduction</code> section referenced
          by the surrounding <code>&lt;blockquote&gt;</code>.

          <p>The Selectors and States Note [[selectors-states]] explains that fragment identifiers are technically defined when the media
          type is specified. However in practice the utilization of fragment identifiers by publishers and developers ranges from
          browser state handling to anchoring highlights of quotations (as seen here).</p>

          <p>Using these fragment identifiers as values of the <code>cite</code> attribute on <code>&lt;blockquote&gt;</code>
          and <code>&lt;q&gt;</code> tags provides a means for both specificity and future extensibility. Site authors as well as
          browser, server, and JavaScript developers may take advantage of these citations identifiers for re-anchoring selection
          or extracting (and verifying) quotations made within an HTML document which uses this method.</p>
		</section>
	  <section>
          <h3>Example using an <code>&lt;a&gt;</code> tag</h3>

          <p>Using the same methods described above, <code>&lt;a&gt;</code> tags may also be used to express a desired highlight or reference. However,
          as mentioned above, the use of that fragment within the retrieved resource may vary.</p>

          <pre class="example highlight" title="Example using an anchor tag">
            &lt;p&gt;According to the Web Annotation Data Model spec
            &lt;a href="https://www.w3.org/TR/annotation-model/#selector(type=TextPositionSelector,start=8424,end=8270)"&gt;
            an annotation is considered to be a set of what things?&lt;/a&gt;
            (click the link to find out!)&lt;/p&gt;
          </pre>
		</section>
    </section>

    <section class="appendix">
    <h3>Acknowledgements</h3>

    <p>The Web Annotation Working Group gratefully acknowledges the contributions of the <a href="http://www.w3.org/community/openannotation/">Open Annotation Community Group</a>.  The <a href="http://www.openannotation.org/spec/core">output</a> of the Community Group was fundamental to the current data model.  In particular the editors would like to thank Herbert Van de Sompel of Los Alamos National Laboratory for his editorial contributions throughout the Community Group process.
    </p>

    <p>The following people have been instrumental in providing thoughts, feedback, reviews, content, criticism and input in the creation of this specification:</p>

    <div style="margin-left: 3em">
    Vladimir Alexiev, Art Barstow, Tim Berners-Lee, Chris Birk, Dan Brickley, Sarven Capadisli, Paolo Ciccarese, Tim Cole, Ray Denenberg, TB Dinesh, Sergiu Gordea, Benjamin Goering, Amy Guy, Ivan Herman, Frederick Hirsch, Antoine Isaac, Jacob Jett, Takeshi Kanai, Gregg Kellogg, Andreas Kuckartz, Randall Leeds, Hugo Manguinhas, Ben De Meester, Luc Moreau, Addison Phillips, Davis Salisbury, Robert Sanderson, Maria Janina Sarol, Felix Sasaki, Doug Schepers, Tzviya Siegman, Stian Soiland-Reyes, Manu Sporny, Nick Stenning, Jon Stroop, Lutz Suhrbier, Kyrce Swenson, Raphaël Troncy, Simeon Warner, Erik Wilde, Dan Whaley, Benjamin Young
    </div>
    </section>

</body>
</html>
